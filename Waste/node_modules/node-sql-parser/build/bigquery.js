!function(r,t){for(var n in t)r[n]=t[n]}(exports,function(r){var t={};function n(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=r,n.c=t,n.d=function(r,t,e){n.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:e})},n.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,t){if(1&t&&(r=n(r)),8&t)return r;if(4&t&&"object"==typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var o in r)n.d(e,o,function(t){return r[t]}.bind(null,o));return e},n.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(t,"a",t),t},n.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},n.p="",n(n.s=1)}([function(r,t,n){"use strict";function e(r,t,n,o){this.message=r,this.expected=t,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}!function(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}(e,Error),e.buildMessage=function(r,t){var n={literal:function(r){return'"'+o(r.text)+'"'},class:function(r){var t,n="";for(t=0;t<r.parts.length;t++)n+=r.parts[t]instanceof Array?u(r.parts[t][0])+"-"+u(r.parts[t][1]):u(r.parts[t]);return"["+(r.inverted?"^":"")+n+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function e(r){return r.charCodeAt(0).toString(16).toUpperCase()}function o(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+e(r)}))}function u(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+e(r)}))}return"Expected "+function(r){var t,e,o,u=new Array(r.length);for(t=0;t<r.length;t++)u[t]=(o=r[t],n[o.type](o));if(u.sort(),u.length>0){for(t=1,e=1;t<u.length;t++)u[t-1]!==u[t]&&(u[e]=u[t],e++);u.length=e}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(r)+" but "+function(r){return r?'"'+o(r)+'"':"end of input"}(t)+" found."},r.exports={SyntaxError:e,parse:function(r,t){t=void 0!==t?t:{};var n,o={},u={start:An},a=An,i=vn("(",!1),s=vn(")",!1),c=vn("INTERSECT",!0),f=vn("EXCEPT",!0),l=function(r,t){return wo(r,t)},p=vn("FOR",!0),v=vn("SYSTEM_TIME",!0),b=vn("AS",!0),y=vn("OF",!0),h=vn("REPLACE",!0),d=vn("UNNEST",!0),m=vn("RANGE",!0),A=vn("UNBOUNDED",!0),E=vn("PRECEDING",!0),w=vn("CURRENT",!0),C=vn("ROW",!1),T=vn("ROWS",!0),S=vn("FOLLOWING",!0),L=function(r,t){return Co(r,t)},g=vn("!",!1),I=vn("=",!1),N=function(r){return r[0]+" "+r[2]},O=vn(">=",!1),R=vn(">",!1),j=vn("<=",!1),_=vn("<>",!1),x=vn("<",!1),U=vn("!=",!1),k=vn("+",!1),M=vn("-",!1),D=vn("*",!1),P=vn("/",!1),F=vn("%",!1),W=function(r){return!0===yo[r.toUpperCase()]},H=vn('"',!1),B=/^[^"]/,G=bn(['"'],!0,!1),Y=function(r){return r.join("")},$=vn("'",!1),V=/^[^']/,q=bn(["'"],!0,!1),X=vn("`",!1),Q=/^[^`]/,K=bn(["`"],!0,!1),J=function(r,t){return r+t.join("")},Z=/^[A-Za-z_]/,z=bn([["A","Z"],["a","z"],"_"],!1,!1),rr=/^[A-Za-z0-9_]/,tr=bn([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),nr=/^[A-Za-z0-9_:]/,er=bn([["A","Z"],["a","z"],["0","9"],"_",":"],!1,!1),or=vn(":",!1),ur=function(r){return{type:"string",value:r[1].join("")}},ar=vn("ON UPDATE CURRENT_TIMESTAMP",!0),ir=/^[^"\\\0-\x1F\x7F]/,sr=bn(['"',"\\",["\0",""],""],!0,!1),cr=/^[^'\\]/,fr=bn(["'","\\"],!0,!1),lr=vn("\\'",!1),pr=vn('\\"',!1),vr=vn("\\\\",!1),br=vn("\\/",!1),yr=vn("\\b",!1),hr=vn("\\f",!1),dr=vn("\\n",!1),mr=vn("\\r",!1),Ar=vn("\\t",!1),Er=vn("\\u",!1),wr=vn("\\",!1),Cr=/^[\n\r]/,Tr=bn(["\n","\r"],!1,!1),Sr=vn(".",!1),Lr=/^[0-9]/,gr=bn([["0","9"]],!1,!1),Ir=/^[0-9a-fA-F]/,Nr=bn([["0","9"],["a","f"],["A","F"]],!1,!1),Or=/^[eE]/,Rr=bn(["e","E"],!1,!1),jr=/^[+\-]/,_r=bn(["+","-"],!1,!1),xr=vn("NULL",!0),Ur=(vn("DEFAULT",!0),vn("NOT NULL",!0),vn("TRUE",!0)),kr=(vn("TO",!0),vn("FALSE",!0)),Mr=(vn("DROP",!0),vn("USE",!0),vn("SELECT",!0)),Dr=(vn("IF NOT EXISTS",!0),vn("RECURSIVE",!1),vn("IGNORE",!0),vn("EXPLAIN",!0),vn("PARTITION",!0)),Pr=(vn("INTO",!0),vn("FROM",!0)),Fr=(vn("SET",!0),vn("UNLOCK",!0),vn("LOCK",!0),vn("TABLE",!0),vn("TABLES",!0),vn("COLLATE",!0),vn("ON",!0)),Wr=vn("LEFT",!0),Hr=vn("RIGHT",!0),Br=vn("FULL",!0),Gr=vn("INNER",!0),Yr=vn("CROSS",!0),$r=vn("JOIN",!0),Vr=vn("OUTER",!0),qr=vn("OVER",!0),Xr=vn("UNION",!0),Qr=vn("VALUE",!0),Kr=(vn("VALUES",!0),vn("USING",!0)),Jr=vn("WHERE",!0),Zr=vn("WITH",!0),zr=vn("GROUP",!0),rt=vn("BY",!0),tt=vn("ORDER",!0),nt=vn("HAVING",!0),et=vn("WINDOW",!0),ot=vn("LIMIT",!0),ut=vn("OFFSET",!0),at=vn("ASC",!0),it=vn("DESC",!0),st=vn("ALL",!0),ct=vn("DISTINCT",!0),ft=vn("BETWEEN",!0),lt=vn("IN",!0),pt=vn("IS",!0),vt=vn("LIKE",!0),bt=vn("EXISTS",!0),yt=vn("NOT",!0),ht=vn("AND",!0),dt=vn("OR",!0),mt=vn("COUNT",!0),At=vn("MAX",!0),Et=vn("MIN",!0),wt=vn("SUM",!0),Ct=vn("AVG",!0),Tt=(vn("CALL",!0),vn("CASE",!0),vn("WHEN",!0),vn("THEN",!0),vn("ELSE",!0),vn("END",!0),vn("CAST",!0),vn("ARRAY",!0)),St=vn("BYTES",!0),Lt=vn("BOOL",!0),gt=(vn("CHAR",!0),vn("GEOGRAPHY",!0)),It=(vn("VARCHAR",!0),vn("NUMERIC",!0)),Nt=(vn("DECIMAL",!0),vn("SIGNED",!0),vn("UNSIGNED",!0),vn("INT64",!0)),Ot=(vn("ZEROFILL",!0),vn("INTEGER",!0),vn("JSON",!0),vn("SMALLINT",!0),vn("STRING",!0)),Rt=vn("STRUCT",!0),jt=(vn("TINYINT",!0),vn("TINYTEXT",!0),vn("TEXT",!0),vn("MEDIUMTEXT",!0),vn("LONGTEXT",!0),vn("BIGINT",!0),vn("FLOAT64",!0)),_t=(vn("DOUBLE",!0),vn("DATE",!0)),xt=vn("DATETIME",!0),Ut=vn("TIME",!0),kt=vn("TIMESTAMP",!0),Mt=(vn("TRUNCATE",!0),vn("USER",!0),vn("CURRENT_DATE",!0)),Dt=(vn("ADDDATE",!0),vn("INTERVAL",!0)),Pt=vn("YEAR",!0),Ft=vn("MONTH",!0),Wt=vn("DAY",!0),Ht=vn("HOUR",!0),Bt=vn("MINUTE",!0),Gt=vn("SECOND",!0),Yt=vn("CURRENT_TIME",!0),$t=vn("CURRENT_TIMESTAMP",!0),Vt=(vn("GLOBAL",!0),vn("SESSION",!0),vn("LOCAL",!0),vn("PERSIST",!0),vn("PERSIST_ONLY",!0),vn("ADD",!0),vn("COLUMN",!0),vn("INDEX",!0),vn("KEY",!0),vn("FULLTEXT",!0),vn("UNIQUE",!0),vn("COMMENT",!0),vn("CONSTRAINT",!0),vn("REFERENCES",!0),vn(",",!1)),qt=vn("[",!1),Xt=vn("]",!1),Qt=vn(";",!1),Kt=vn("||",!1),Jt=vn("&&",!1),Zt=vn("/*",!1),zt=vn("*/",!1),rn=vn("--",!1),tn=vn("#",!1),nn={type:"any"},en=/^[ \t\n\r]/,on=bn([" ","\t","\n","\r"],!1,!1),un=function(r){return{dataType:r}},an=function(r,t){return{dataType:r,definition:t,anglebracket:!0}},sn=0,cn=[{line:1,column:1}],fn=0,ln=[],pn=0;if("startRule"in t){if(!(t.startRule in u))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=u[t.startRule]}function vn(r,t){return{type:"literal",text:r,ignoreCase:t}}function bn(r,t,n){return{type:"class",parts:r,inverted:t,ignoreCase:n}}function yn(t){var n,e=cn[t];if(e)return e;for(n=t-1;!cn[n];)n--;for(e={line:(e=cn[n]).line,column:e.column};n<t;)10===r.charCodeAt(n)?(e.line++,e.column=1):e.column++,n++;return cn[t]=e,e}function hn(r,t){var n=yn(r),e=yn(t);return{start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:e.line,column:e.column}}}function dn(r){sn<fn||(sn>fn&&(fn=sn,ln=[]),ln.push(r))}function mn(r,t,n){return new e(e.buildMessage(r,t),r,t,n)}function An(){var r,t;return r=sn,uo()!==o?((t=function(){var r,t,n,e,u,a,i,s;if(r=sn,(t=En())!==o){if(n=[],e=sn,(u=uo())!==o&&(a=eo())!==o&&(i=uo())!==o&&(s=En())!==o?e=u=[u,a,i,s]:(sn=e,e=o),e!==o)for(;e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=eo())!==o&&(i=uo())!==o&&(s=En())!==o?e=u=[u,a,i,s]:(sn=e,e=o);else n=o;n!==o?(r,t=function(r,t){const n=[r&&r.ast||r];for(let r=0;r<t.length;r++)t[r][3]&&0!==t[r][3].length&&n.push(t[r][3]&&t[r][3].ast||t[r][3]);return{tableList:Array.from(Lo),columnList:So(go),ast:n}}(t,n),r=t):(sn=r,r=o)}else sn=r,r=o;return r}())===o&&(t=En()),t!==o?(r,r=t):(sn=r,r=o)):(sn=r,r=o),r}function En(){var t,n,e,u,a,c,f;return(t=function(){var t,n,e,u,a,i;t=sn,(n=function(){var r,t,n,e,u,a,i,s,c;if(r=sn,(t=Oe())!==o)if(uo()!==o)if((n=Ln())!==o){for(e=[],u=sn,(a=uo())!==o&&(i=Qe())!==o&&(s=uo())!==o&&(c=Ln())!==o?u=a=[a,i,s,c]:(sn=u,u=o);u!==o;)e.push(u),u=sn,(a=uo())!==o&&(i=Qe())!==o&&(s=uo())!==o&&(c=Ln())!==o?u=a=[a,i,s,c]:(sn=u,u=o);e!==o?(r,t=l(n,e),r=t):(sn=r,r=o)}else sn=r,r=o;else sn=r,r=o;else sn=r,r=o;return r}())===o&&(n=null);n!==o&&uo()!==o&&(e=Cn())!==o&&uo()!==o?((u=Pn())===o&&(u=null),u!==o&&uo()!==o?((a=function(){var t,n,e,u,a,i,s;t=sn,(n=function(){var t,n,e,u;t=sn,"limit"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(ot));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}())!==o&&uo()!==o&&(e=Wn())!==o&&uo()!==o?(u=sn,(a=Qe())===o&&(a=je()),a!==o&&(i=uo())!==o&&(s=Wn())!==o?u=a=[a,i,s]:(sn=u,u=o),u===o&&(u=null),u!==o?(t,n=function(r,t){const n=[r];return t&&n.push(t[2]),{seperator:t&&t[0]&&t[0].toLowerCase()||"",value:n}}(e,u),t=n):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(a=null),a!==o&&uo()!==o?((i=eo())===o&&(i=null),i!==o?(t,s=n,c=e,f=u,p=a,n={tableList:Array.from(Lo),columnList:So(go),ast:{type:"bigquery",with:s,select:c&&c.ast,orderby:f,limit:p,parentheses:c&&c.parentheses}},t=n):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o);var s,c,f,p;return t}())===o&&(t=sn,n=sn,40===r.charCodeAt(sn)?(e="(",sn++):(e=o,0===pn&&dn(i)),e!==o&&(u=uo())!==o&&(a=Sn())!==o&&(c=uo())!==o?(41===r.charCodeAt(sn)?(f=")",sn++):(f=o,0===pn&&dn(s)),f!==o?n=e=[e,u,a,c,f]:(sn=n,n=o)):(sn=n,n=o),n!==o&&(t,n={...n[2],parentheses:!0}),t=n),t}function wn(){var t,n,e,u;return t=sn,(n=function(){var t,n,e,u;t=sn,"union"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(Xr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}())!==o&&uo()!==o?((e=_e())===o&&(e=xe()),e===o&&(e=null),e!==o?(t,t=n=(u=e)?"union "+u.toLowerCase():"union"):(sn=t,t=o)):(sn=t,t=o),t===o&&(t=sn,"intersect"===r.substr(sn,9).toLowerCase()?(n=r.substr(sn,9),sn+=9):(n=o,0===pn&&dn(c)),n===o&&("except"===r.substr(sn,6).toLowerCase()?(n=r.substr(sn,6),sn+=6):(n=o,0===pn&&dn(f))),n!==o&&uo()!==o&&(e=xe())!==o?(t,t=n=function(r,t){return`${r.toLowerCase()} ${t.toLowerCase()}`}(n,e)):(sn=t,t=o)),t}function Cn(){var t,n,e,u,a,c,f;return(t=Tn())===o&&(t=sn,n=sn,40===r.charCodeAt(sn)?(e="(",sn++):(e=o,0===pn&&dn(i)),e!==o&&(u=uo())!==o&&(a=Tn())!==o&&(c=uo())!==o?(41===r.charCodeAt(sn)?(f=")",sn++):(f=o,0===pn&&dn(s)),f!==o?n=e=[e,u,a,c,f]:(sn=n,n=o)):(sn=n,n=o),n!==o&&(t,n={...n[2],parentheses:!0}),t=n),t}function Tn(){var r,t,n,e,u,a,i,s;if(r=sn,(t=Sn())!==o){for(n=[],e=sn,(u=uo())!==o?((a=wn())===o&&(a=null),a!==o&&(i=uo())!==o&&(s=Sn())!==o?e=u=[u,a,i,s]:(sn=e,e=o)):(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=uo())!==o?((a=wn())===o&&(a=null),a!==o&&(i=uo())!==o&&(s=Sn())!==o?e=u=[u,a,i,s]:(sn=e,e=o)):(sn=e,e=o);n!==o?(r,r=t=function(r,t){let n=r;for(let r=0;r<t.length;r++)n._next=t[r][3],n.union=t[r][1],n=n._next;return{tableList:Array.from(Lo),columnList:So(go),ast:r}}(t,n)):(sn=r,r=o)}else sn=r,r=o;return r}function Sn(){var t,n,e,u,a,c,f;return(t=function(){var t,n,e,u,a,i,s,c,f,h;t=sn,function(){var t,n,e,u;t=sn,"select"===r.substr(sn,6).toLowerCase()?(n=r.substr(sn,6),sn+=6):(n=o,0===pn&&dn(Mr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}()!==o&&uo()!==o?((n=function(){var t,n,e;t=sn,(n=Le())!==o&&uo()!==o?((e=Ge())===o&&(e=function(){var t,n,e,u;t=sn,"value"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(Qr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="VALUE"):(sn=t,t=o)):(sn=t,t=o);return t}()),e!==o?(t,u=e,n=`${n[0].toLowerCase()} ${u.toLowerCase()}`,t=n):(sn=t,t=o)):(sn=t,t=o);var u;return t}())===o&&(n=null),n!==o&&uo()!==o?((e=_e())===o&&(e=xe()),e===o&&(e=null),e!==o&&uo()!==o&&(u=gn())!==o&&uo()!==o?((a=function(){var t,n,e,u,a;t=sn,Se()!==o&&uo()!==o?("unnest"===r.substr(sn,6).toLowerCase()?(n=r.substr(sn,6),sn+=6):(n=o,0===pn&&dn(d)),n!==o&&uo()!==o&&Je()!==o&&uo()!==o?((e=Yn())===o&&(e=null),e!==o&&uo()!==o&&Ze()!==o&&uo()!==o?((u=On())===o&&(u=null),u!==o&&uo()!==o?((a=function(){var r,t;r=sn,Oe()!==o&&uo()!==o&&je()!==o&&uo()!==o?((t=On())===o&&(t=null),t!==o?(r,r={keyword:"with offset as",as:t}):(sn=r,r=o)):(sn=r,r=o);return r}())===o&&(a=null),a!==o?(t,t={type:"unnest",expr:e,parentheses:!0,as:u,with_offset:a}):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o);t===o&&(t=sn,Se()!==o&&uo()!==o&&(n=function(){var r,t,n,e;if(r=sn,(t=jn())!==o){for(n=[],e=Rn();e!==o;)n.push(e),e=Rn();n!==o?(r,u=t,(a=n).unshift(u),a.forEach(r=>{const{table:t,as:n}=r;Io[t]=t,n&&(Io[n]=t)}),r=t=a):(sn=r,r=o)}else sn=r,r=o;var u,a;return r}())!==o?(t,t=n):(sn=t,t=o));return t}())===o&&(a=null),a!==o&&uo()!==o?((i=function(){var t,n,e,u,a,i;t=sn,"for"===r.substr(sn,3).toLowerCase()?(n=r.substr(sn,3),sn+=3):(n=o,0===pn&&dn(p));n!==o&&uo()!==o?("system_time"===r.substr(sn,11).toLowerCase()?(e=r.substr(sn,11),sn+=11):(e=o,0===pn&&dn(v)),e!==o&&uo()!==o?("as"===r.substr(sn,2).toLowerCase()?(u=r.substr(sn,2),sn+=2):(u=o,0===pn&&dn(b)),u!==o&&uo()!==o?("of"===r.substr(sn,2).toLowerCase()?(a=r.substr(sn,2),sn+=2):(a=o,0===pn&&dn(y)),a!==o&&uo()!==o&&(i=Bn())!==o?(t,t=n={keyword:"for system_time as of",expr:i}):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(i=null),i!==o&&uo()!==o?((s=function(){var t,n;t=sn,function(){var t,n,e,u;t=sn,"where"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(Jr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}()!==o&&uo()!==o&&(n=Bn())!==o?(t,t=n):(sn=t,t=o);return t}())===o&&(s=null),s!==o&&uo()!==o?((c=function(){var t,n,e;t=sn,(n=function(){var t,n,e,u;t=sn,"group"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(zr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}())!==o&&uo()!==o&&Re()!==o&&uo()!==o&&(e=Hn())!==o?(t,n=e.value,t=n):(sn=t,t=o);return t}())===o&&(c=null),c!==o&&uo()!==o?((f=function(){var t,n;t=sn,function(){var t,n,e,u;t=sn,"having"===r.substr(sn,6).toLowerCase()?(n=r.substr(sn,6),sn+=6):(n=o,0===pn&&dn(nt));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}()!==o&&uo()!==o&&(n=Bn())!==o?(t,t=n):(sn=t,t=o);return t}())===o&&(f=null),f!==o&&uo()!==o?((h=function(){var t,n;t=sn,function(){var t,n,e,u;t=sn,"window"===r.substr(sn,6).toLowerCase()?(n=r.substr(sn,6),sn+=6):(n=o,0===pn&&dn(et));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}()!==o&&uo()!==o&&(n=function(){var r,t,n,e,u,a,i,s;if(r=sn,(t=kn())!==o){for(n=[],e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=kn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=kn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);n!==o?(r,t=l(t,n),r=t):(sn=r,r=o)}else sn=r,r=o;return r}())!==o?(t,t={keyword:"window",type:"window",expr:n}):(sn=t,t=o);return t}())===o&&(h=null),h!==o?(t,m=n,A=e,E=u,w=a,C=i,T=s,S=c,L=f,g=h,Array.isArray(w)&&w.forEach(r=>r.table&&Lo.add(`select::${r.db}::${r.table}`)),t={type:"select",as_struct_val:m,distinct:A,columns:E,from:w,for_sys_time_as_of:C,where:T,groupby:S,having:L,window:g}):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o);var m,A,E,w,C,T,S,L,g;return t}())===o&&(t=sn,n=sn,40===r.charCodeAt(sn)?(e="(",sn++):(e=o,0===pn&&dn(i)),e!==o&&(u=uo())!==o&&(a=Sn())!==o&&(c=uo())!==o?(41===r.charCodeAt(sn)?(f=")",sn++):(f=o,0===pn&&dn(s)),f!==o?n=e=[e,u,a,c,f]:(sn=n,n=o)):(sn=n,n=o),n!==o&&(t,n={...n[2],parentheses_symbol:!0}),t=n),t}function Ln(){var r,t,n;return r=sn,(t=ae())!==o&&uo()!==o&&Le()!==o&&uo()!==o&&Je()!==o&&uo()!==o&&(n=Cn())!==o&&uo()!==o&&Ze()!==o?(r,r=t={name:t,stmt:n}):(sn=r,r=o),r}function gn(){var t,n,e,u,a,i,s,c,l,p,v,b;if(t=sn,(n=Ke())!==o&&(e=uo())!==o?("except"===r.substr(sn,6).toLowerCase()?(u=r.substr(sn,6),sn+=6):(u=o,0===pn&&dn(f)),u===o&&("replace"===r.substr(sn,7).toLowerCase()?(u=r.substr(sn,7),sn+=7):(u=o,0===pn&&dn(h))),u!==o&&(a=uo())!==o&&(i=Je())!==o&&(s=uo())!==o&&(c=In())!==o&&uo()!==o&&Ze()!==o?(t,l=u,p=c,go.add("select::null::(.*)"),t=n={expr_list:p,parentheses:!0,star:"*",type:l.toLowerCase()}):(sn=t,t=o)):(sn=t,t=o),t===o){if(t=sn,(n=_e())===o&&(n=sn,(e=Ke())!==o?(u=sn,pn++,a=ie(),pn--,a===o?u=void 0:(sn=u,u=o),u!==o?n=e=[e,u]:(sn=n,n=o)):(sn=n,n=o),n===o&&(n=Ke())),n!==o){for(e=[],u=sn,(a=uo())!==o&&(i=Qe())!==o&&(s=uo())!==o&&(c=Nn())!==o?u=a=[a,i,s,c]:(sn=u,u=o);u!==o;)e.push(u),u=sn,(a=uo())!==o&&(i=Qe())!==o&&(s=uo())!==o&&(c=Nn())!==o?u=a=[a,i,s,c]:(sn=u,u=o);e!==o&&(u=uo())!==o?((a=Qe())===o&&(a=null),a!==o?(t,v=n,b=e,go.add("select::null::(.*)"),t=n=b&&b.length>0?(v[0]={expr:{type:"column_ref",table:null,column:"*"},as:null},wo(v[0],b)):v[0]):(sn=t,t=o)):(sn=t,t=o)}else sn=t,t=o;t===o&&(t=sn,(n=In())!==o&&(e=uo())!==o?((u=Qe())===o&&(u=null),u!==o?(t,t=n=n):(sn=t,t=o)):(sn=t,t=o))}return t}function In(){var r,t,n,e,u,a,i,s;if(r=sn,(t=Nn())!==o){for(n=[],e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=Nn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=Nn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);n!==o?(r,r=t=l(t,n)):(sn=r,r=o)}else sn=r,r=o;return r}function Nn(){var r,t,n,e,u,a,i,s;return r=sn,(t=ne())!==o&&uo()!==o&&Xe()!==o?(n=sn,(e=function(){var r,t,n;return r=sn,(t=ne())!==o&&uo()!==o&&to()!==o&&uo()!==o&&je()!==o&&uo()!==o&&Je()!==o&&uo()!==o&&(n=de())!==o&&uo()!==o&&Ze()!==o&&uo()!==o&&no()!==o?(r,r=t=`${t}[offset(${n.value})]`):(sn=r,r=o),r===o&&(r=ne()),r}())!==o&&(u=uo())!==o&&(a=Xe())!==o?n=e=[e,u,a]:(sn=n,n=o),n===o&&(n=null),n!==o&&(e=uo())!==o&&(u=Ke())!==o?(r,i=t,s=n,go.add(`select::${i}::(.*)`),s&&(i=`${i}.${s[0]}`),r=t={expr:{type:"column_ref",table:i,column:"*"},as:null}):(sn=r,r=o)):(sn=r,r=o),r===o&&(r=function(){var r,t,n;return r=sn,(t=Bn())!==o&&uo()!==o?((n=On())===o&&(n=null),n!==o?(r,r=t={expr:t,as:n}):(sn=r,r=o)):(sn=r,r=o),r}()),r}function On(){var r,t,n;return r=sn,(t=Le())!==o&&uo()!==o&&(n=function(){var r,t;r=sn,(t=ae())!==o?(sn,(function(r){if(!0===yo[r.toUpperCase()])throw new Error("Error: "+JSON.stringify(r)+" is a reserved word, can not as alias clause");return!1}(t)?o:void 0)!==o?(r,r=t=t):(sn=r,r=o)):(sn=r,r=o);r===o&&(r=sn,(t=ee())!==o&&(r,t=t),r=t);return r}())!==o?(r,r=t=n):(sn=r,r=o),r===o&&(r=sn,(t=Le())===o&&(t=null),t!==o&&uo()!==o&&(n=ne())!==o?(r,r=t=n):(sn=r,r=o)),r}function Rn(){var t,n,e;return t=sn,uo()!==o&&(n=Qe())!==o&&uo()!==o&&(e=jn())!==o?(t,t=e):(sn=t,t=o),t===o&&(t=sn,uo()!==o&&(n=function(){var t,n,e,u,a,i,s,c,f,l,p;if(t=sn,(n=_n())!==o)if(uo()!==o)if((e=jn())!==o)if(uo()!==o)if((u=function(){var t,n,e,u;t=sn,"using"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(Kr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}())!==o)if(uo()!==o)if(Je()!==o)if(uo()!==o)if((a=ae())!==o){for(i=[],s=sn,(c=uo())!==o&&(f=Qe())!==o&&(l=uo())!==o&&(p=ae())!==o?s=c=[c,f,l,p]:(sn=s,s=o);s!==o;)i.push(s),s=sn,(c=uo())!==o&&(f=Qe())!==o&&(l=uo())!==o&&(p=ae())!==o?s=c=[c,f,l,p]:(sn=s,s=o);i!==o&&(s=uo())!==o&&(c=Ze())!==o?(t,v=n,y=a,h=i,(b=e).join=v,b.using=wo(y,h),t=n=b):(sn=t,t=o)}else sn=t,t=o;else sn=t,t=o;else sn=t,t=o;else sn=t,t=o;else sn=t,t=o;else sn=t,t=o;else sn=t,t=o;else sn=t,t=o;else sn=t,t=o;var v,b,y,h;t===o&&(t=sn,(n=_n())!==o&&uo()!==o&&(e=jn())!==o&&uo()!==o?((u=Un())===o&&(u=null),u!==o?(t,n=function(r,t,n){return t.join=r,t.on=n,t}(n,e,u),t=n):(sn=t,t=o)):(sn=t,t=o),t===o&&(t=sn,(n=_n())!==o&&uo()!==o&&(e=Je())!==o&&uo()!==o&&(u=Cn())!==o&&uo()!==o&&Ze()!==o&&uo()!==o?((a=On())===o&&(a=null),a!==o&&(i=uo())!==o?((s=Un())===o&&(s=null),s!==o?(t,n=function(r,t,n,e){return t.parentheses=!0,{expr:t,as:n,join:r,on:e}}(n,u,a,s),t=n):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)));return t}())!==o?(t,t=n):(sn=t,t=o)),t}function jn(){var r,t,n,e,u,a;return r=sn,(t=xn())!==o&&uo()!==o?((n=On())===o&&(n=null),n!==o?(r,a=n,r=t="var"===(u=t).type?(u.as=a,u):{db:u.db,table:u.table,as:a}):(sn=r,r=o)):(sn=r,r=o),r===o&&(r=sn,(t=Je())!==o&&uo()!==o&&(n=Cn())!==o&&uo()!==o&&Ze()!==o&&uo()!==o?((e=On())===o&&(e=null),e!==o?(r,r=t=function(r,t){return r.parentheses=!0,{expr:r,as:t}}(n,e)):(sn=r,r=o)):(sn=r,r=o)),r}function _n(){var t,n,e;return t=sn,(n=function(){var t,n,e,u;t=sn,"left"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(Wr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}())!==o&&uo()!==o?((e=Ie())===o&&(e=null),e!==o&&uo()!==o&&ge()!==o?(t,t=n="LEFT JOIN"):(sn=t,t=o)):(sn=t,t=o),t===o&&(t=sn,(n=function(){var t,n,e,u;t=sn,"right"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(Hr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}())!==o&&uo()!==o?((e=Ie())===o&&(e=null),e!==o&&uo()!==o&&ge()!==o?(t,t=n="RIGHT JOIN"):(sn=t,t=o)):(sn=t,t=o),t===o&&(t=sn,(n=function(){var t,n,e,u;t=sn,"full"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(Br));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}())!==o&&uo()!==o?((e=Ie())===o&&(e=null),e!==o&&uo()!==o&&ge()!==o?(t,t=n="FULL JOIN"):(sn=t,t=o)):(sn=t,t=o),t===o&&(t=sn,(n=function(){var t,n,e,u;t=sn,"inner"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(Gr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(n=function(){var t,n,e,u;t=sn,"cross"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(Yr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}()),n!==o&&uo()!==o&&(e=ge())!==o?(t,t=n=n[0].toUpperCase()+" JOIN"):(sn=t,t=o)))),t}function xn(){var r,t,n,e,u,a,i,s;return r=sn,(t=ne())!==o?(n=sn,(e=uo())!==o&&(u=Xe())!==o&&(a=uo())!==o&&(i=ne())!==o?n=e=[e,u,a,i]:(sn=n,n=o),n!==o?(e=sn,(u=uo())!==o&&(a=Xe())!==o&&(i=uo())!==o&&(s=ne())!==o?e=u=[u,a,i,s]:(sn=e,e=o),e!==o?(r,r=t=function(r,t,n){const e={db:null,table:r};return null!==n&&(e.db=`${r}.${t[3]}`,e.table=n[3]),e}(t,n,e)):(sn=r,r=o)):(sn=r,r=o)):(sn=r,r=o),r===o&&(r=sn,(t=ne())!==o?(n=sn,(e=uo())!==o&&(u=Xe())!==o&&(a=uo())!==o&&(i=ne())!==o?n=e=[e,u,a,i]:(sn=n,n=o),n===o&&(n=null),n!==o?(r,r=t=function(r,t){const n={db:null,table:r};return null!==t&&(n.db=r,n.table=t[3]),n}(t,n)):(sn=r,r=o)):(sn=r,r=o)),r}function Un(){var t,n;return t=sn,function(){var t,n,e,u;t=sn,"on"===r.substr(sn,2).toLowerCase()?(n=r.substr(sn,2),sn+=2):(n=o,0===pn&&dn(Fr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}()!==o&&uo()!==o&&(n=Bn())!==o?(t,t=n):(sn=t,t=o),t}function kn(){var r,t,n;return r=sn,(t=ae())!==o&&uo()!==o&&Le()!==o&&uo()!==o&&(n=Mn())!==o?(r,r=t={name:t,as_window_specification:n}):(sn=r,r=o),r}function Mn(){var t,n,e;return t=sn,(n=ae())!==o&&(t,n=n),(t=n)===o&&(t=sn,(n=Je())!==o&&uo()!==o?((e=function(){var t,n,e,u,a;t=sn,(n=ne())===o&&(n=null);n!==o&&uo()!==o?((e=Dn())===o&&(e=null),e!==o&&uo()!==o?((u=Pn())===o&&(u=null),u!==o&&uo()!==o?((a=function(){var t,n,e,u,a,i,s,c,f,l;t=sn,"range"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(m));n!==o&&uo()!==o&&Ue()!==o?("unbounded"===r.substr(sn,9).toLowerCase()?(e=r.substr(sn,9),sn+=9):(e=o,0===pn&&dn(A)),e!==o&&(u=uo())!==o?("preceding"===r.substr(sn,9).toLowerCase()?(a=r.substr(sn,9),sn+=9):(a=o,0===pn&&dn(E)),a!==o&&(i=uo())!==o&&We()!==o&&uo()!==o?("current"===r.substr(sn,7).toLowerCase()?(s=r.substr(sn,7),sn+=7):(s=o,0===pn&&dn(w)),s!==o&&(c=uo())!==o?("ROW"===r.substr(sn,3)?(f="ROW",sn+=3):(f=o,0===pn&&dn(C)),f!==o?(t,t=n="range between unbounded preceding and current row"):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o);t===o&&(t=sn,"rows"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(T)),n!==o&&uo()!==o&&Ue()!==o&&(e=uo())!==o&&(u=de())!==o&&(a=uo())!==o?("preceding"===r.substr(sn,9).toLowerCase()?(i=r.substr(sn,9),sn+=9):(i=o,0===pn&&dn(E)),i!==o&&uo()!==o&&We()!==o&&(s=uo())!==o&&(c=de())!==o&&(f=uo())!==o?("following"===r.substr(sn,9).toLowerCase()?(l=r.substr(sn,9),sn+=9):(l=o,0===pn&&dn(S)),l!==o?(t,p=c,n=`rows between ${u.value} preceding and ${p.value} following`,t=n):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o));var p;return t}())===o&&(a=null),a!==o?(t,t=n={name:n,partitionby:e,orderby:u,window_frame_clause:a}):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(e=null),e!==o&&uo()!==o&&Ze()!==o?(t,t=n={window_specification:e,parentheses:!0}):(sn=t,t=o)):(sn=t,t=o)),t}function Dn(){var t,n;return t=sn,function(){var t,n,e,u;t=sn,"partition"===r.substr(sn,9).toLowerCase()?(n=r.substr(sn,9),sn+=9):(n=o,0===pn&&dn(Dr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="PARTITION"):(sn=t,t=o)):(sn=t,t=o);return t}()!==o&&uo()!==o&&Re()!==o&&uo()!==o&&(n=gn())!==o?(t,t=n):(sn=t,t=o),t}function Pn(){var t,n;return t=sn,function(){var t,n,e,u;t=sn,"order"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(tt));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}()!==o&&uo()!==o&&Re()!==o&&uo()!==o&&(n=function(){var r,t,n,e,u,a,i,s;if(r=sn,(t=Fn())!==o){for(n=[],e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=Fn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=Fn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);n!==o?(r,t=l(t,n),r=t):(sn=r,r=o)}else sn=r,r=o;return r}())!==o?(t,t=n):(sn=t,t=o),t}function Fn(){var t,n,e;return t=sn,(n=Bn())!==o&&uo()!==o?((e=function(){var t,n,e,u;t=sn,"desc"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(it));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="DESC"):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(e=function(){var t,n,e,u;t=sn,"asc"===r.substr(sn,3).toLowerCase()?(n=r.substr(sn,3),sn+=3):(n=o,0===pn&&dn(at));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="ASC"):(sn=t,t=o)):(sn=t,t=o);return t}()),e===o&&(e=null),e!==o?(t,t=n=function(r,t){const n={expr:r,type:"ASC"};return"DESC"===t&&(n.type="DESC"),n}(n,e)):(sn=t,t=o)):(sn=t,t=o),t}function Wn(){var r;return(r=de())===o&&(r=fe()),r}function Hn(){var r,t,n,e,u,a,i,s;if(r=sn,(t=Bn())!==o){for(n=[],e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=Bn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=Bn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);n!==o?(r,r=t=function(r,t){const n={type:"expr_list"};return n.value=wo(r,t),n}(t,n)):(sn=r,r=o)}else sn=r,r=o;return r}function Bn(){var r;return(r=function(){var r,t,n,e,u,a,i,s;if(r=sn,(t=Gn())!==o){for(n=[],e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=Gn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=Gn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);n!==o?(r,t=l(t,n),r=t):(sn=r,r=o)}else sn=r,r=o;return r}())===o&&(r=function(){var r,t,n;r=sn,(t=bo())===o&&(t=Ge());t!==o&&uo()!==o&&Je()!==o&&uo()!==o&&(n=gn())!==o&&uo()!==o&&Ze()!==o?(r,r=t={definition:e=t,expr_list:n,type:"struct",keyword:e&&"struct",parentheses:!0}):(sn=r,r=o);var e;return r}())===o&&(r=function(){var r,t,n,e,u,a,i,s;if(r=sn,(t=re())!==o){if(n=[],e=sn,(u=uo())!==o&&(a=oo())!==o&&(i=uo())!==o&&(s=re())!==o?e=u=[u,a,i,s]:(sn=e,e=o),e!==o)for(;e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=oo())!==o&&(i=uo())!==o&&(s=re())!==o?e=u=[u,a,i,s]:(sn=e,e=o);else n=o;n!==o?(r,t=Co(t,n),r=t):(sn=r,r=o)}else sn=r,r=o;return r}())===o&&(r=function(){var r,t,n,e,u,a;if(r=sn,(t=Jn())!==o){if(n=[],e=sn,(u=uo())!==o&&(a=re())!==o?e=u=[u,a]:(sn=e,e=o),e!==o)for(;e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=re())!==o?e=u=[u,a]:(sn=e,e=o);else n=o;n!==o?(r,t=mo(t,n[0][1]),r=t):(sn=r,r=o)}else sn=r,r=o;return r}())===o&&(r=function(){var r,t,n,e,u,a,i,s;if(r=sn,(t=$n())!==o){for(n=[],e=sn,(u=ao())!==o&&(a=He())!==o&&(i=uo())!==o&&(s=$n())!==o?e=u=[u,a,i,s]:(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=ao())!==o&&(a=He())!==o&&(i=uo())!==o&&(s=$n())!==o?e=u=[u,a,i,s]:(sn=e,e=o);n!==o?(r,t=L(t,n),r=t):(sn=r,r=o)}else sn=r,r=o;return r}())===o&&(r=Sn())===o&&(r=Yn()),r}function Gn(){var r,t;return r=sn,Je()!==o&&uo()!==o&&(t=gn())!==o&&uo()!==o&&Ze()!==o?(r,r=t):(sn=r,r=o),r}function Yn(){var r,t,n,e,u;return r=sn,(t=to())!==o&&uo()!==o&&(n=gn())!==o&&(e=uo())!==o&&(u=no())!==o?(r,r=t={array_path:n,type:"array",keyword:"",parentheses:!0}):(sn=r,r=o),r===o&&(r=sn,(t=vo())===o&&(t=Be()),t===o&&(t=null),t!==o&&to()!==o&&(n=uo())!==o&&(e=function(){var r,t,n,e,u,a,i,s;if(r=sn,(t=pe())!==o){for(n=[],e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=pe())!==o?e=u=[u,a,i,s]:(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=pe())!==o?e=u=[u,a,i,s]:(sn=e,e=o);n!==o?(r,t=l(t,n),r=t):(sn=r,r=o)}else sn=r,r=o;return r}())!==o&&(u=uo())!==o&&no()!==o?(r,r=t=function(r,t){return{definition:r,array_path:t.map(r=>({expr:r,as:null})),type:"array",keyword:r&&"array",parentheses:!0}}(t,e)):(sn=r,r=o),r===o&&(r=sn,(t=vo())===o&&(t=Be()),t===o&&(t=null),t!==o&&uo()!==o&&(n=to())!==o&&(e=uo())!==o&&(u=Bn())!==o&&uo()!==o&&no()!==o?(r,r=t=function(r,t){return{definition:r,expr_list:t,type:"array",keyword:r&&"array",parentheses:!0}}(t,u)):(sn=r,r=o))),r}function $n(){var r,t,n,e,u,a,i,s;if(r=sn,(t=Vn())!==o){for(n=[],e=sn,(u=ao())!==o&&(a=We())!==o&&(i=uo())!==o&&(s=Vn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=ao())!==o&&(a=We())!==o&&(i=uo())!==o&&(s=Vn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);n!==o?(r,r=t=L(t,n)):(sn=r,r=o)}else sn=r,r=o;return r}function Vn(){var t,n,e,u,a;return(t=qn())===o&&(t=function(){var r,t,n;r=sn,(t=function(){var r,t,n,e,u;r=sn,t=sn,(n=Fe())!==o&&(e=uo())!==o&&(u=Pe())!==o?t=n=[n,e,u]:(sn=t,t=o);t!==o&&(r,t=N(t));(r=t)===o&&(r=Pe());return r}())!==o&&uo()!==o&&Je()!==o&&uo()!==o&&(n=Cn())!==o&&uo()!==o&&Ze()!==o?(r,e=t,(u=n).parentheses=!0,t=mo(e,u),r=t):(sn=r,r=o);var e,u;return r}())===o&&(t=sn,(n=Fe())===o&&(n=sn,33===r.charCodeAt(sn)?(e="!",sn++):(e=o,0===pn&&dn(g)),e!==o?(u=sn,pn++,61===r.charCodeAt(sn)?(a="=",sn++):(a=o,0===pn&&dn(I)),pn--,a===o?u=void 0:(sn=u,u=o),u!==o?n=e=[e,u]:(sn=n,n=o)):(sn=n,n=o)),n!==o&&(e=uo())!==o&&(u=Vn())!==o?(t,t=n=mo("NOT",u)):(sn=t,t=o)),t}function qn(){var r,t,n,e,u;return r=sn,(t=Kn())!==o&&uo()!==o?((n=function(){var r;(r=function(){var r,t,n,e,u,a,i;r=sn,t=[],n=sn,(e=uo())!==o&&(u=Xn())!==o&&(a=uo())!==o&&(i=Kn())!==o?n=e=[e,u,a,i]:(sn=n,n=o);if(n!==o)for(;n!==o;)t.push(n),n=sn,(e=uo())!==o&&(u=Xn())!==o&&(a=uo())!==o&&(i=Kn())!==o?n=e=[e,u,a,i]:(sn=n,n=o);else t=o;t!==o&&(r,t={type:"arithmetic",tail:t});return r=t}())===o&&(r=function(){var r,t,n,e;r=sn,(t=Qn())!==o&&uo()!==o&&(n=Je())!==o&&uo()!==o&&(e=Hn())!==o&&uo()!==o&&Ze()!==o?(r,r=t={op:t,right:e}):(sn=r,r=o);r===o&&(r=sn,(t=Qn())!==o&&uo()!==o&&(n=ve())!==o?(r,t=function(r,t){return{op:r,right:t}}(t,n),r=t):(sn=r,r=o));return r}())===o&&(r=function(){var r,t,n,e;r=sn,(t=function(){var r,t,n,e,u;r=sn,t=sn,(n=Fe())!==o&&(e=uo())!==o&&(u=Ue())!==o?t=n=[n,e,u]:(sn=t,t=o);t!==o&&(r,t=N(t));(r=t)===o&&(r=Ue());return r}())!==o&&uo()!==o&&(n=Kn())!==o&&uo()!==o&&We()!==o&&uo()!==o&&(e=Kn())!==o?(r,r=t={op:t,right:{type:"expr_list",value:[n,e]}}):(sn=r,r=o);return r}())===o&&(r=function(){var r,t,n,e,u;r=sn,(t=Me())!==o&&(n=uo())!==o&&(e=Kn())!==o?(r,r=t={op:"IS",right:e}):(sn=r,r=o);r===o&&(r=sn,t=sn,(n=Me())!==o&&(e=uo())!==o&&(u=Fe())!==o?t=n=[n,e,u]:(sn=t,t=o),t!==o&&(n=uo())!==o&&(e=Kn())!==o?(r,t=function(r){return{op:"IS NOT",right:r}}(e),r=t):(sn=r,r=o));return r}())===o&&(r=function(){var r,t,n;r=sn,(t=function(){var r,t,n,e,u;r=sn,t=sn,(n=Fe())!==o&&(e=uo())!==o&&(u=De())!==o?t=n=[n,e,u]:(sn=t,t=o);t!==o&&(r,t=N(t));(r=t)===o&&(r=De());return r}())!==o&&uo()!==o&&(n=qn())!==o?(r,r=t={op:t,right:n}):(sn=r,r=o);return r}());return r}())===o&&(n=null),n!==o?(r,e=t,r=t=null===(u=n)?e:"arithmetic"===u.type?Co(e,u.tail):Ao(u.op,e,u.right)):(sn=r,r=o)):(sn=r,r=o),r}function Xn(){var t;return">="===r.substr(sn,2)?(t=">=",sn+=2):(t=o,0===pn&&dn(O)),t===o&&(62===r.charCodeAt(sn)?(t=">",sn++):(t=o,0===pn&&dn(R)),t===o&&("<="===r.substr(sn,2)?(t="<=",sn+=2):(t=o,0===pn&&dn(j)),t===o&&("<>"===r.substr(sn,2)?(t="<>",sn+=2):(t=o,0===pn&&dn(_)),t===o&&(60===r.charCodeAt(sn)?(t="<",sn++):(t=o,0===pn&&dn(x)),t===o&&(61===r.charCodeAt(sn)?(t="=",sn++):(t=o,0===pn&&dn(I)),t===o&&("!="===r.substr(sn,2)?(t="!=",sn+=2):(t=o,0===pn&&dn(U)))))))),t}function Qn(){var r,t,n,e,u;return r=sn,t=sn,(n=Fe())!==o&&(e=uo())!==o&&(u=ke())!==o?t=n=[n,e,u]:(sn=t,t=o),t!==o&&(r,t=N(t)),(r=t)===o&&(r=ke()),r}function Kn(){var r,t,n,e,u,a,i,s;if(r=sn,(t=Zn())!==o){for(n=[],e=sn,(u=uo())!==o&&(a=Jn())!==o&&(i=uo())!==o&&(s=Zn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=Jn())!==o&&(i=uo())!==o&&(s=Zn())!==o?e=u=[u,a,i,s]:(sn=e,e=o);n!==o?(r,r=t=L(t,n)):(sn=r,r=o)}else sn=r,r=o;return r}function Jn(){var t;return 43===r.charCodeAt(sn)?(t="+",sn++):(t=o,0===pn&&dn(k)),t===o&&(45===r.charCodeAt(sn)?(t="-",sn++):(t=o,0===pn&&dn(M))),t}function Zn(){var r,t,n,e,u,a,i,s;if(r=sn,(t=re())!==o){for(n=[],e=sn,(u=uo())!==o&&(a=zn())!==o&&(i=uo())!==o&&(s=re())!==o?e=u=[u,a,i,s]:(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=zn())!==o&&(i=uo())!==o&&(s=re())!==o?e=u=[u,a,i,s]:(sn=e,e=o);n!==o?(r,r=t=Co(t,n)):(sn=r,r=o)}else sn=r,r=o;return r}function zn(){var t;return 42===r.charCodeAt(sn)?(t="*",sn++):(t=o,0===pn&&dn(D)),t===o&&(47===r.charCodeAt(sn)?(t="/",sn++):(t=o,0===pn&&dn(P)),t===o&&(37===r.charCodeAt(sn)?(t="%",sn++):(t=o,0===pn&&dn(F)))),t}function re(){var t,n,e,u;return(t=pe())===o&&(t=function(){var t;(t=function(){var t,n,e,u;t=sn,(n=function(){var t,n,e,u;t=sn,"count"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(mt));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="COUNT"):(sn=t,t=o)):(sn=t,t=o);return t}())!==o&&uo()!==o&&Je()!==o&&uo()!==o&&(e=function(){var t,n,e;t=sn,(n=function(){var t,n;t=sn,42===r.charCodeAt(sn)?(n="*",sn++):(n=o,0===pn&&dn(D));n!==o&&(t,n={type:"star",value:"*"});return t=n}())!==o&&(t,n={expr:n});(t=n)===o&&(t=sn,(n=xe())===o&&(n=null),n!==o&&uo()!==o&&(e=te())!==o?(t,t=n={distinct:n,expr:e}):(sn=t,t=o));return t}())!==o&&uo()!==o&&Ze()!==o&&uo()!==o?((u=le())===o&&(u=null),u!==o?(t,t=n={type:"aggr_func",name:n,args:e,over:u}):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(t=function(){var t,n,e;t=sn,(n=function(){var t;(t=function(){var t,n,e,u;t=sn,"sum"===r.substr(sn,3).toLowerCase()?(n=r.substr(sn,3),sn+=3):(n=o,0===pn&&dn(wt));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="SUM"):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(t=function(){var t,n,e,u;t=sn,"max"===r.substr(sn,3).toLowerCase()?(n=r.substr(sn,3),sn+=3):(n=o,0===pn&&dn(At));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="MAX"):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(t=function(){var t,n,e,u;t=sn,"min"===r.substr(sn,3).toLowerCase()?(n=r.substr(sn,3),sn+=3):(n=o,0===pn&&dn(Et));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="MIN"):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(t=function(){var t,n,e,u;t=sn,"avg"===r.substr(sn,3).toLowerCase()?(n=r.substr(sn,3),sn+=3):(n=o,0===pn&&dn(Ct));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="AVG"):(sn=t,t=o)):(sn=t,t=o);return t}());return t}())!==o&&uo()!==o&&Je()!==o&&uo()!==o&&(e=Kn())!==o&&uo()!==o&&Ze()!==o?(t,t=n={type:"aggr_func",name:n,args:{expr:e}}):(sn=t,t=o);return t}());return t}())===o&&(t=function(){var t,n,e,u,a;t=sn,(n=function(){var r,t,n,e,u,a,i;r=sn,(t=ne())!==o?(n=sn,(e=uo())!==o&&(u=Xe())!==o&&(a=uo())!==o&&(i=ne())!==o?n=e=[e,u,a,i]:(sn=n,n=o),n===o&&(n=null),n!==o?(r,t=function(r,t){let n=r;return null!==t&&(n=`${r}.${t[3]}`),n}(t,n),r=t):(sn=r,r=o)):(sn=r,r=o);return r}())!==o&&uo()!==o&&Je()!==o&&uo()!==o?((e=Hn())===o&&(e=null),e!==o&&uo()!==o&&(u=Ze())!==o&&uo()!==o?((a=le())===o&&(a=null),a!==o?(t,t=n={type:"function",name:n,args:e||{type:"expr_list",value:[]},over:a}):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o);t===o&&(t=sn,(n=function(){var t;(t=function(){var t,n,e,u;t=sn,"current_date"===r.substr(sn,12).toLowerCase()?(n=r.substr(sn,12),sn+=12):(n=o,0===pn&&dn(Mt));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="CURRENT_DATE"):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(t=function(){var t,n,e,u;t=sn,"current_time"===r.substr(sn,12).toLowerCase()?(n=r.substr(sn,12),sn+=12):(n=o,0===pn&&dn(Yt));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="CURRENT_TIME"):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(t=qe());return t}())!==o&&uo()!==o&&Je()!==o&&uo()!==o&&(e=Ze())!==o&&uo()!==o?((u=le())===o&&(u=null),u!==o?(t,n=function(r,t){return{type:"function",name:r,args:{type:"expr_list",value:[]},over:t}}(n,u),t=n):(sn=t,t=o)):(sn=t,t=o));return t}())===o&&(t=function(){var t,n,e,u;t=sn,(n=function(){var t,n,e,u;t=sn,"interval"===r.substr(sn,8).toLowerCase()?(n=r.substr(sn,8),sn+=8):(n=o,0===pn&&dn(Dt));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="INTERVAL"):(sn=t,t=o)):(sn=t,t=o);return t}())!==o&&uo()!==o&&(e=Bn())!==o&&uo()!==o&&(u=function(){var t;(t=function(){var t,n,e,u;t=sn,"year"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(Pt));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="YEAR"):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(t=function(){var t,n,e,u;t=sn,"month"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(Ft));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="MONTH"):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(t=function(){var t,n,e,u;t=sn,"day"===r.substr(sn,3).toLowerCase()?(n=r.substr(sn,3),sn+=3):(n=o,0===pn&&dn(Wt));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="DAY"):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(t=function(){var t,n,e,u;t=sn,"hour"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(Ht));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="HOUR"):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(t=function(){var t,n,e,u;t=sn,"minute"===r.substr(sn,6).toLowerCase()?(n=r.substr(sn,6),sn+=6):(n=o,0===pn&&dn(Bt));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="MINUTE"):(sn=t,t=o)):(sn=t,t=o);return t}())===o&&(t=function(){var t,n,e,u;t=sn,"second"===r.substr(sn,6).toLowerCase()?(n=r.substr(sn,6),sn+=6):(n=o,0===pn&&dn(Gt));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="SECOND"):(sn=t,t=o)):(sn=t,t=o);return t}());return t}())!==o?(t,n={type:"interval",expr:e,unit:u.toLowerCase()},t=n):(sn=t,t=o);return t}())===o&&(t=te())===o&&(t=fe())===o&&(t=sn,Je()!==o&&uo()!==o&&(n=Bn())!==o&&uo()!==o&&Ze()!==o?(t,(u=n).parentheses=!0,t=u):(sn=t,t=o),t===o&&(t=sn,Je()!==o&&uo()!==o&&(n=Hn())!==o&&uo()!==o&&Ze()!==o?(t,(e=n).parentheses=!0,t=e):(sn=t,t=o))),t}function te(){var r,t,n,e,u;return r=sn,(t=ne())!==o&&uo()!==o&&Xe()!==o&&uo()!==o&&(n=function(){var r,t;r=sn,(t=ue())!==o&&(r,t=t);(r=t)===o&&(r=ee());return r}())!==o?(r,e=t,u=n,go.add(`select::${e}::${u}`),r=t={type:"column_ref",table:e,column:u}):(sn=r,r=o),r===o&&(r=sn,(t=oe())!==o&&(r,t=function(r){return go.add("select::null::"+r),{type:"column_ref",table:null,column:r}}(t)),r=t),r}function ne(){var r,t;return r=sn,(t=ae())!==o?(sn,(W(t)?o:void 0)!==o?(r,r=t=t):(sn=r,r=o)):(sn=r,r=o),r===o&&(r=sn,(t=ee())!==o&&(r,t=t),r=t),r}function ee(){var t;return(t=function(){var t,n,e,u;t=sn,34===r.charCodeAt(sn)?(n='"',sn++):(n=o,0===pn&&dn(H));if(n!==o){if(e=[],B.test(r.charAt(sn))?(u=r.charAt(sn),sn++):(u=o,0===pn&&dn(G)),u!==o)for(;u!==o;)e.push(u),B.test(r.charAt(sn))?(u=r.charAt(sn),sn++):(u=o,0===pn&&dn(G));else e=o;e!==o?(34===r.charCodeAt(sn)?(u='"',sn++):(u=o,0===pn&&dn(H)),u!==o?(t,n=Y(e),t=n):(sn=t,t=o)):(sn=t,t=o)}else sn=t,t=o;return t}())===o&&(t=function(){var t,n,e,u;t=sn,39===r.charCodeAt(sn)?(n="'",sn++):(n=o,0===pn&&dn($));if(n!==o){if(e=[],V.test(r.charAt(sn))?(u=r.charAt(sn),sn++):(u=o,0===pn&&dn(q)),u!==o)for(;u!==o;)e.push(u),V.test(r.charAt(sn))?(u=r.charAt(sn),sn++):(u=o,0===pn&&dn(q));else e=o;e!==o?(39===r.charCodeAt(sn)?(u="'",sn++):(u=o,0===pn&&dn($)),u!==o?(t,n=Y(e),t=n):(sn=t,t=o)):(sn=t,t=o)}else sn=t,t=o;return t}())===o&&(t=function(){var t,n,e,u;t=sn,96===r.charCodeAt(sn)?(n="`",sn++):(n=o,0===pn&&dn(X));if(n!==o){if(e=[],Q.test(r.charAt(sn))?(u=r.charAt(sn),sn++):(u=o,0===pn&&dn(K)),u!==o)for(;u!==o;)e.push(u),Q.test(r.charAt(sn))?(u=r.charAt(sn),sn++):(u=o,0===pn&&dn(K));else e=o;e!==o?(96===r.charCodeAt(sn)?(u="`",sn++):(u=o,0===pn&&dn(X)),u!==o?(t,n=Y(e),t=n):(sn=t,t=o)):(sn=t,t=o)}else sn=t,t=o;return t}()),t}function oe(){var r,t;return r=sn,(t=ue())!==o?(sn,(W(t)?o:void 0)!==o?(r,r=t=t):(sn=r,r=o)):(sn=r,r=o),r===o&&(r=ee()),r}function ue(){var r,t,n,e;if(r=sn,(t=ie())!==o){for(n=[],e=ce();e!==o;)n.push(e),e=ce();n!==o?(r,r=t=J(t,n)):(sn=r,r=o)}else sn=r,r=o;return r}function ae(){var r,t,n,e;if(r=sn,(t=ie())!==o){for(n=[],e=se();e!==o;)n.push(e),e=se();n!==o?(r,r=t=J(t,n)):(sn=r,r=o)}else sn=r,r=o;return r}function ie(){var t;return Z.test(r.charAt(sn))?(t=r.charAt(sn),sn++):(t=o,0===pn&&dn(z)),t}function se(){var t;return rr.test(r.charAt(sn))?(t=r.charAt(sn),sn++):(t=o,0===pn&&dn(tr)),t}function ce(){var t;return nr.test(r.charAt(sn))?(t=r.charAt(sn),sn++):(t=o,0===pn&&dn(er)),t}function fe(){var t,n,e,u;return t=sn,n=sn,58===r.charCodeAt(sn)?(e=":",sn++):(e=o,0===pn&&dn(or)),e!==o&&(u=ae())!==o?n=e=[e,u]:(sn=n,n=o),n!==o&&(t,n={type:"param",value:n[1]}),t=n}function le(){var r,t,n,e;return r=sn,Ne()!==o&&uo()!==o&&(t=Mn())!==o?(r,r={type:"window",as_window_specification:t}):(sn=r,r=o),r===o&&(r=sn,Ne()!==o&&uo()!==o&&(t=Je())!==o&&uo()!==o&&(n=Dn())!==o&&uo()!==o?((e=Pn())===o&&(e=null),e!==o&&uo()!==o&&Ze()!==o?(r,r={partitionby:n,orderby:e}):(sn=r,r=o)):(sn=r,r=o)),r}function pe(){var t;return(t=ve())===o&&(t=de())===o&&(t=function(){var t,n;t=sn,(n=function(){var t,n,e,u;t=sn,"true"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(Ur));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}())!==o&&(t,n={type:"bool",value:!0});(t=n)===o&&(t=sn,(n=function(){var t,n,e,u;t=sn,"false"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(kr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}())!==o&&(t,n={type:"bool",value:!1}),t=n);return t}())===o&&(t=function(){var t,n;t=sn,(n=function(){var t,n,e,u;t=sn,"null"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(xr));n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o);return t}())!==o&&(t,n={type:"null",value:null});return t=n}())===o&&(t=function(){var t,n,e,u,a,i,s;t=sn,(n=$e())===o&&(n=Ye())===o&&(n=Ve());if(n!==o)if(uo()!==o){if(e=sn,39===r.charCodeAt(sn)?(u="'",sn++):(u=o,0===pn&&dn($)),u!==o){for(a=[],i=ye();i!==o;)a.push(i),i=ye();a!==o?(39===r.charCodeAt(sn)?(i="'",sn++):(i=o,0===pn&&dn($)),i!==o?e=u=[u,a,i]:(sn=e,e=o)):(sn=e,e=o)}else sn=e,e=o;e!==o?(t,c=e,n={type:n.toLowerCase(),value:c[1].join("")},t=n):(sn=t,t=o)}else sn=t,t=o;else sn=t,t=o;var c;t===o&&(t=sn,(n=qe())!==o&&uo()!==o?((e=Je())===o&&(e=null),e!==o&&(u=uo())!==o?((a=Ze())===o&&(a=null),a!==o?(sn,(i=(i=function(r,t,n){if(t&&n)return!0}(0,e,a))?o:void 0)!==o&&uo()!==o?("on update current_timestamp"===r.substr(sn,27).toLowerCase()?(s=r.substr(sn,27),sn+=27):(s=o,0===pn&&dn(ar)),s===o&&(s=null),s!==o?(t,n=function(r,t,n,e){return{type:"origin",value:(e?`${r} ${e}`:r).toLowerCase()}}(n,0,0,s),t=n):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o)):(sn=t,t=o));return t}()),t}function ve(){var t,n,e,u,a;if(t=sn,n=sn,39===r.charCodeAt(sn)?(e="'",sn++):(e=o,0===pn&&dn($)),e!==o){for(u=[],a=ye();a!==o;)u.push(a),a=ye();u!==o?(39===r.charCodeAt(sn)?(a="'",sn++):(a=o,0===pn&&dn($)),a!==o?n=e=[e,u,a]:(sn=n,n=o)):(sn=n,n=o)}else sn=n,n=o;if(n!==o&&(t,n=ur(n)),(t=n)===o){if(t=sn,n=sn,34===r.charCodeAt(sn)?(e='"',sn++):(e=o,0===pn&&dn(H)),e!==o){for(u=[],a=be();a!==o;)u.push(a),a=be();u!==o?(34===r.charCodeAt(sn)?(a='"',sn++):(a=o,0===pn&&dn(H)),a!==o?n=e=[e,u,a]:(sn=n,n=o)):(sn=n,n=o)}else sn=n,n=o;n!==o&&(t,n=ur(n)),t=n}return t}function be(){var t;return ir.test(r.charAt(sn))?(t=r.charAt(sn),sn++):(t=o,0===pn&&dn(sr)),t===o&&(t=he()),t}function ye(){var t;return cr.test(r.charAt(sn))?(t=r.charAt(sn),sn++):(t=o,0===pn&&dn(fr)),t===o&&(t=he()),t}function he(){var t,n,e,u,a,i,s,c,f,l;return t=sn,"\\'"===r.substr(sn,2)?(n="\\'",sn+=2):(n=o,0===pn&&dn(lr)),n!==o&&(t,n="'"),(t=n)===o&&(t=sn,'\\"'===r.substr(sn,2)?(n='\\"',sn+=2):(n=o,0===pn&&dn(pr)),n!==o&&(t,n='"'),(t=n)===o&&(t=sn,"\\\\"===r.substr(sn,2)?(n="\\\\",sn+=2):(n=o,0===pn&&dn(vr)),n!==o&&(t,n="\\"),(t=n)===o&&(t=sn,"\\/"===r.substr(sn,2)?(n="\\/",sn+=2):(n=o,0===pn&&dn(br)),n!==o&&(t,n="/"),(t=n)===o&&(t=sn,"\\b"===r.substr(sn,2)?(n="\\b",sn+=2):(n=o,0===pn&&dn(yr)),n!==o&&(t,n="\b"),(t=n)===o&&(t=sn,"\\f"===r.substr(sn,2)?(n="\\f",sn+=2):(n=o,0===pn&&dn(hr)),n!==o&&(t,n="\f"),(t=n)===o&&(t=sn,"\\n"===r.substr(sn,2)?(n="\\n",sn+=2):(n=o,0===pn&&dn(dr)),n!==o&&(t,n="\n"),(t=n)===o&&(t=sn,"\\r"===r.substr(sn,2)?(n="\\r",sn+=2):(n=o,0===pn&&dn(mr)),n!==o&&(t,n="\r"),(t=n)===o&&(t=sn,"\\t"===r.substr(sn,2)?(n="\\t",sn+=2):(n=o,0===pn&&dn(Ar)),n!==o&&(t,n="\t"),(t=n)===o&&(t=sn,"\\u"===r.substr(sn,2)?(n="\\u",sn+=2):(n=o,0===pn&&dn(Er)),n!==o&&(e=Te())!==o&&(u=Te())!==o&&(a=Te())!==o&&(i=Te())!==o?(t,s=e,c=u,f=a,l=i,t=n=String.fromCharCode(parseInt("0x"+s+c+f+l))):(sn=t,t=o),t===o&&(t=sn,92===r.charCodeAt(sn)?(n="\\",sn++):(n=o,0===pn&&dn(wr)),n!==o&&(t,n="\\"),t=n)))))))))),t}function de(){var r,t,n;return r=sn,(t=function(){var r,t,n,e;r=sn,(t=me())!==o&&(n=Ae())!==o&&(e=Ee())!==o?(r,r=t={type:"bigint",value:t+n+e}):(sn=r,r=o);r===o&&(r=sn,(t=me())!==o&&(n=Ae())!==o?(r,t=function(r,t){const n=r+t;return Eo(r)?{type:"bigint",value:n}:parseFloat(n)}(t,n),r=t):(sn=r,r=o),r===o&&(r=sn,(t=me())!==o&&(n=Ee())!==o?(r,t=function(r,t){return{type:"bigint",value:r+t}}(t,n),r=t):(sn=r,r=o),r===o&&(r=sn,(t=me())!==o&&(r,t=function(r){return Eo(r)?{type:"bigint",value:r}:parseFloat(r)}(t)),r=t)));return r}())!==o&&(r,t=(n=t)&&"bigint"===n.type?n:{type:"number",value:n}),r=t}function me(){var t,n,e;return(t=we())===o&&(t=Ce())===o&&(t=sn,45===r.charCodeAt(sn)?(n="-",sn++):(n=o,0===pn&&dn(M)),n===o&&(43===r.charCodeAt(sn)?(n="+",sn++):(n=o,0===pn&&dn(k))),n!==o&&(e=we())!==o?(t,t=n="-"+e):(sn=t,t=o),t===o&&(t=sn,45===r.charCodeAt(sn)?(n="-",sn++):(n=o,0===pn&&dn(M)),n===o&&(43===r.charCodeAt(sn)?(n="+",sn++):(n=o,0===pn&&dn(k))),n!==o&&(e=Ce())!==o?(t,t=n="-"+e):(sn=t,t=o))),t}function Ae(){var t,n,e;return t=sn,46===r.charCodeAt(sn)?(n=".",sn++):(n=o,0===pn&&dn(Sr)),n!==o&&(e=we())!==o?(t,t=n="."+e):(sn=t,t=o),t}function Ee(){var t,n,e;return t=sn,(n=function(){var t,n,e;t=sn,Or.test(r.charAt(sn))?(n=r.charAt(sn),sn++):(n=o,0===pn&&dn(Rr));n!==o?(jr.test(r.charAt(sn))?(e=r.charAt(sn),sn++):(e=o,0===pn&&dn(_r)),e===o&&(e=null),e!==o?(t,t=n=n+(null!==(u=e)?u:"")):(sn=t,t=o)):(sn=t,t=o);var u;return t}())!==o&&(e=we())!==o?(t,t=n=n+e):(sn=t,t=o),t}function we(){var r,t,n;if(r=sn,t=[],(n=Ce())!==o)for(;n!==o;)t.push(n),n=Ce();else t=o;return t!==o&&(r,t=t.join("")),r=t}function Ce(){var t;return Lr.test(r.charAt(sn))?(t=r.charAt(sn),sn++):(t=o,0===pn&&dn(gr)),t}function Te(){var t;return Ir.test(r.charAt(sn))?(t=r.charAt(sn),sn++):(t=o,0===pn&&dn(Nr)),t}function Se(){var t,n,e,u;return t=sn,"from"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(Pr)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o),t}function Le(){var t,n,e,u;return t=sn,"as"===r.substr(sn,2).toLowerCase()?(n=r.substr(sn,2),sn+=2):(n=o,0===pn&&dn(b)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o),t}function ge(){var t,n,e,u;return t=sn,"join"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn($r)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o),t}function Ie(){var t,n,e,u;return t=sn,"outer"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(Vr)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o),t}function Ne(){var t,n,e,u;return t=sn,"over"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(qr)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o),t}function Oe(){var t,n,e,u;return t=sn,"with"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(Zr)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o),t}function Re(){var t,n,e,u;return t=sn,"by"===r.substr(sn,2).toLowerCase()?(n=r.substr(sn,2),sn+=2):(n=o,0===pn&&dn(rt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?t=n=[n,e]:(sn=t,t=o)):(sn=t,t=o),t}function je(){var t,n,e,u;return t=sn,"offset"===r.substr(sn,6).toLowerCase()?(n=r.substr(sn,6),sn+=6):(n=o,0===pn&&dn(ut)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="OFFSET"):(sn=t,t=o)):(sn=t,t=o),t}function _e(){var t,n,e,u;return t=sn,"all"===r.substr(sn,3).toLowerCase()?(n=r.substr(sn,3),sn+=3):(n=o,0===pn&&dn(st)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="ALL"):(sn=t,t=o)):(sn=t,t=o),t}function xe(){var t,n,e,u;return t=sn,"distinct"===r.substr(sn,8).toLowerCase()?(n=r.substr(sn,8),sn+=8):(n=o,0===pn&&dn(ct)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="DISTINCT"):(sn=t,t=o)):(sn=t,t=o),t}function Ue(){var t,n,e,u;return t=sn,"between"===r.substr(sn,7).toLowerCase()?(n=r.substr(sn,7),sn+=7):(n=o,0===pn&&dn(ft)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="BETWEEN"):(sn=t,t=o)):(sn=t,t=o),t}function ke(){var t,n,e,u;return t=sn,"in"===r.substr(sn,2).toLowerCase()?(n=r.substr(sn,2),sn+=2):(n=o,0===pn&&dn(lt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="IN"):(sn=t,t=o)):(sn=t,t=o),t}function Me(){var t,n,e,u;return t=sn,"is"===r.substr(sn,2).toLowerCase()?(n=r.substr(sn,2),sn+=2):(n=o,0===pn&&dn(pt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="IS"):(sn=t,t=o)):(sn=t,t=o),t}function De(){var t,n,e,u;return t=sn,"like"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(vt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="LIKE"):(sn=t,t=o)):(sn=t,t=o),t}function Pe(){var t,n,e,u;return t=sn,"exists"===r.substr(sn,6).toLowerCase()?(n=r.substr(sn,6),sn+=6):(n=o,0===pn&&dn(bt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="EXISTS"):(sn=t,t=o)):(sn=t,t=o),t}function Fe(){var t,n,e,u;return t=sn,"not"===r.substr(sn,3).toLowerCase()?(n=r.substr(sn,3),sn+=3):(n=o,0===pn&&dn(yt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="NOT"):(sn=t,t=o)):(sn=t,t=o),t}function We(){var t,n,e,u;return t=sn,"and"===r.substr(sn,3).toLowerCase()?(n=r.substr(sn,3),sn+=3):(n=o,0===pn&&dn(ht)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="AND"):(sn=t,t=o)):(sn=t,t=o),t}function He(){var t,n,e,u;return t=sn,"or"===r.substr(sn,2).toLowerCase()?(n=r.substr(sn,2),sn+=2):(n=o,0===pn&&dn(dt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="OR"):(sn=t,t=o)):(sn=t,t=o),t}function Be(){var t,n,e,u;return t=sn,"array"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(Tt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="ARRAY"):(sn=t,t=o)):(sn=t,t=o),t}function Ge(){var t,n,e,u;return t=sn,"struct"===r.substr(sn,6).toLowerCase()?(n=r.substr(sn,6),sn+=6):(n=o,0===pn&&dn(Rt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="STRUCT"):(sn=t,t=o)):(sn=t,t=o),t}function Ye(){var t,n,e,u;return t=sn,"date"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(_t)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="DATE"):(sn=t,t=o)):(sn=t,t=o),t}function $e(){var t,n,e,u;return t=sn,"time"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(Ut)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="TIME"):(sn=t,t=o)):(sn=t,t=o),t}function Ve(){var t,n,e,u;return t=sn,"timestamp"===r.substr(sn,9).toLowerCase()?(n=r.substr(sn,9),sn+=9):(n=o,0===pn&&dn(kt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="TIMESTAMP"):(sn=t,t=o)):(sn=t,t=o),t}function qe(){var t,n,e,u;return t=sn,"current_timestamp"===r.substr(sn,17).toLowerCase()?(n=r.substr(sn,17),sn+=17):(n=o,0===pn&&dn($t)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="CURRENT_TIMESTAMP"):(sn=t,t=o)):(sn=t,t=o),t}function Xe(){var t;return 46===r.charCodeAt(sn)?(t=".",sn++):(t=o,0===pn&&dn(Sr)),t}function Qe(){var t;return 44===r.charCodeAt(sn)?(t=",",sn++):(t=o,0===pn&&dn(Vt)),t}function Ke(){var t;return 42===r.charCodeAt(sn)?(t="*",sn++):(t=o,0===pn&&dn(D)),t}function Je(){var t;return 40===r.charCodeAt(sn)?(t="(",sn++):(t=o,0===pn&&dn(i)),t}function Ze(){var t;return 41===r.charCodeAt(sn)?(t=")",sn++):(t=o,0===pn&&dn(s)),t}function ze(){var t;return 60===r.charCodeAt(sn)?(t="<",sn++):(t=o,0===pn&&dn(x)),t}function ro(){var t;return 62===r.charCodeAt(sn)?(t=">",sn++):(t=o,0===pn&&dn(R)),t}function to(){var t;return 91===r.charCodeAt(sn)?(t="[",sn++):(t=o,0===pn&&dn(qt)),t}function no(){var t;return 93===r.charCodeAt(sn)?(t="]",sn++):(t=o,0===pn&&dn(Xt)),t}function eo(){var t;return 59===r.charCodeAt(sn)?(t=";",sn++):(t=o,0===pn&&dn(Qt)),t}function oo(){var t;return(t=function(){var t;return"||"===r.substr(sn,2)?(t="||",sn+=2):(t=o,0===pn&&dn(Kt)),t}())===o&&(t=function(){var t;return"&&"===r.substr(sn,2)?(t="&&",sn+=2):(t=o,0===pn&&dn(Jt)),t}()),t}function uo(){var r,t;for(r=[],(t=co())===o&&(t=io());t!==o;)r.push(t),(t=co())===o&&(t=io());return r}function ao(){var r,t;if(r=[],(t=co())===o&&(t=io()),t!==o)for(;t!==o;)r.push(t),(t=co())===o&&(t=io());else r=o;return r}function io(){var t;return(t=function(){var t,n,e,u,a,i;t=sn,"/*"===r.substr(sn,2)?(n="/*",sn+=2):(n=o,0===pn&&dn(Zt));if(n!==o){for(e=[],u=sn,a=sn,pn++,"*/"===r.substr(sn,2)?(i="*/",sn+=2):(i=o,0===pn&&dn(zt)),pn--,i===o?a=void 0:(sn=a,a=o),a!==o&&(i=so())!==o?u=a=[a,i]:(sn=u,u=o);u!==o;)e.push(u),u=sn,a=sn,pn++,"*/"===r.substr(sn,2)?(i="*/",sn+=2):(i=o,0===pn&&dn(zt)),pn--,i===o?a=void 0:(sn=a,a=o),a!==o&&(i=so())!==o?u=a=[a,i]:(sn=u,u=o);e!==o?("*/"===r.substr(sn,2)?(u="*/",sn+=2):(u=o,0===pn&&dn(zt)),u!==o?t=n=[n,e,u]:(sn=t,t=o)):(sn=t,t=o)}else sn=t,t=o;return t}())===o&&(t=function(){var t,n,e,u,a,i;t=sn,"--"===r.substr(sn,2)?(n="--",sn+=2):(n=o,0===pn&&dn(rn));if(n!==o){for(e=[],u=sn,a=sn,pn++,i=fo(),pn--,i===o?a=void 0:(sn=a,a=o),a!==o&&(i=so())!==o?u=a=[a,i]:(sn=u,u=o);u!==o;)e.push(u),u=sn,a=sn,pn++,i=fo(),pn--,i===o?a=void 0:(sn=a,a=o),a!==o&&(i=so())!==o?u=a=[a,i]:(sn=u,u=o);e!==o?t=n=[n,e]:(sn=t,t=o)}else sn=t,t=o;return t}())===o&&(t=function(){var t,n,e,u,a,i;t=sn,35===r.charCodeAt(sn)?(n="#",sn++):(n=o,0===pn&&dn(tn));if(n!==o){for(e=[],u=sn,a=sn,pn++,i=fo(),pn--,i===o?a=void 0:(sn=a,a=o),a!==o&&(i=so())!==o?u=a=[a,i]:(sn=u,u=o);u!==o;)e.push(u),u=sn,a=sn,pn++,i=fo(),pn--,i===o?a=void 0:(sn=a,a=o),a!==o&&(i=so())!==o?u=a=[a,i]:(sn=u,u=o);e!==o?t=n=[n,e]:(sn=t,t=o)}else sn=t,t=o;return t}()),t}function so(){var t;return r.length>sn?(t=r.charAt(sn),sn++):(t=o,0===pn&&dn(nn)),t}function co(){var t;return en.test(r.charAt(sn))?(t=r.charAt(sn),sn++):(t=o,0===pn&&dn(on)),t}function fo(){var t,n;if((t=function(){var t,n;t=sn,pn++,r.length>sn?(n=r.charAt(sn),sn++):(n=o,0===pn&&dn(nn));pn--,n===o?t=void 0:(sn=t,t=o);return t}())===o)if(t=[],Cr.test(r.charAt(sn))?(n=r.charAt(sn),sn++):(n=o,0===pn&&dn(Tr)),n!==o)for(;n!==o;)t.push(n),Cr.test(r.charAt(sn))?(n=r.charAt(sn),sn++):(n=o,0===pn&&dn(Tr));else t=o;return t}function lo(){var r,t,n,e,u,a,i,s;if(r=sn,(t=po())!==o){for(n=[],e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=po())!==o?e=u=[u,a,i,s]:(sn=e,e=o);e!==o;)n.push(e),e=sn,(u=uo())!==o&&(a=Qe())!==o&&(i=uo())!==o&&(s=po())!==o?e=u=[u,a,i,s]:(sn=e,e=o);n!==o?(r,r=t=l(t,n)):(sn=r,r=o)}else sn=r,r=o;return r}function po(){var t,n,e,u;return t=sn,n=sn,(e=ae())!==o?(sn,(u=(u=!0===ho[e.toUpperCase()])?o:void 0)!==o?(n,n=e=e):(sn=n,n=o)):(sn=n,n=o),n===o&&(n=null),n!==o&&(e=uo())!==o&&(u=function(){var t;(t=bo())===o&&(t=vo())===o&&(t=function(){var t,n;t=sn,(n=function(){var t,n,e,u;return t=sn,"string"===r.substr(sn,6).toLowerCase()?(n=r.substr(sn,6),sn+=6):(n=o,0===pn&&dn(Ot)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="STRING"):(sn=t,t=o)):(sn=t,t=o),t}())!==o&&(t,n=un(n));return t=n}())===o&&(t=function(){var t,n;t=sn,(n=function(){var t,n,e,u;return t=sn,"numeric"===r.substr(sn,7).toLowerCase()?(n=r.substr(sn,7),sn+=7):(n=o,0===pn&&dn(It)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="NUMERIC"):(sn=t,t=o)):(sn=t,t=o),t}())===o&&(n=function(){var t,n,e,u;return t=sn,"int64"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(Nt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="INT64"):(sn=t,t=o)):(sn=t,t=o),t}())===o&&(n=function(){var t,n,e,u;return t=sn,"float64"===r.substr(sn,7).toLowerCase()?(n=r.substr(sn,7),sn+=7):(n=o,0===pn&&dn(jt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="FLOAT64"):(sn=t,t=o)):(sn=t,t=o),t}());n!==o&&(t,n=un(n));return t=n}())===o&&(t=function(){var t,n;t=sn,(n=Ye())===o&&(n=$e())===o&&(n=Ve())===o&&(n=function(){var t,n,e,u;return t=sn,"datetime"===r.substr(sn,8).toLowerCase()?(n=r.substr(sn,8),sn+=8):(n=o,0===pn&&dn(xt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="DATETIME"):(sn=t,t=o)):(sn=t,t=o),t}());n!==o&&(t,n=un(n));return t=n}())===o&&(t=function(){var t,n;t=sn,(n=function(){var t,n,e,u;return t=sn,"bytes"===r.substr(sn,5).toLowerCase()?(n=r.substr(sn,5),sn+=5):(n=o,0===pn&&dn(St)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="BYTES"):(sn=t,t=o)):(sn=t,t=o),t}())===o&&(n=function(){var t,n,e,u;return t=sn,"bool"===r.substr(sn,4).toLowerCase()?(n=r.substr(sn,4),sn+=4):(n=o,0===pn&&dn(Lt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="BOOL"):(sn=t,t=o)):(sn=t,t=o),t}())===o&&(n=function(){var t,n,e,u;return t=sn,"geography"===r.substr(sn,9).toLowerCase()?(n=r.substr(sn,9),sn+=9):(n=o,0===pn&&dn(gt)),n!==o?(e=sn,pn++,u=ie(),pn--,u===o?e=void 0:(sn=e,e=o),e!==o?(t,t=n="GEOGRAPHY"):(sn=t,t=o)):(sn=t,t=o),t}());n!==o&&(t,n=un(n));return t=n}());return t}())!==o?(t,t=n=function(r,t){return{field_name:r,field_type:t}}(n,u)):(sn=t,t=o),t}function vo(){var r,t,n;return r=sn,(t=Be())!==o&&uo()!==o&&ze()!==o&&uo()!==o&&(n=lo())!==o&&uo()!==o&&ro()!==o?(r,r=t=an(t,n)):(sn=r,r=o),r}function bo(){var r,t,n;return r=sn,(t=Ge())!==o&&uo()!==o&&ze()!==o&&uo()!==o&&(n=lo())!==o&&uo()!==o&&ro()!==o?(r,r=t=an(t,n)):(sn=r,r=o),r}const yo={ARRAY:!0,ALTER:!0,ALL:!0,ADD:!0,AND:!0,AS:!0,ASC:!0,BETWEEN:!0,BY:!0,CALL:!0,CASE:!0,CREATE:!0,CROSS:!0,CONTAINS:!0,CURRENT_DATE:!0,CURRENT_TIME:!0,CURRENT_TIMESTAMP:!0,CURRENT_USER:!0,DELETE:!0,DESC:!0,DISTINCT:!0,DROP:!0,ELSE:!0,END:!0,EXISTS:!0,EXPLAIN:!0,FALSE:!0,FROM:!0,FULL:!0,FOR:!0,GROUP:!0,HAVING:!0,IN:!0,INNER:!0,INSERT:!0,INTO:!0,IS:!0,JOIN:!0,JSON:!0,KEY:!0,LEFT:!0,LIKE:!0,LIMIT:!0,LOW_PRIORITY:!0,NOT:!0,NULL:!0,ON:!0,OR:!0,ORDER:!0,OUTER:!0,PARTITION:!0,RECURSIVE:!0,RENAME:!0,READ:!0,RIGHT:!0,SELECT:!0,SESSION_USER:!0,SET:!0,SHOW:!0,SYSTEM_USER:!0,TABLE:!0,THEN:!0,TRUE:!0,TRUNCATE:!0,TYPE:!0,UNION:!0,UPDATE:!0,USING:!0,VALUES:!0,WINDOW:!0,WITH:!0,WHEN:!0,WHERE:!0,WRITE:!0,GLOBAL:!0,SESSION:!0,LOCAL:!0,PERSIST:!0,PERSIST_ONLY:!0},ho={BOOL:!0,BYTE:!0,DATE:!0,DATETIME:!0,FLOAT64:!0,INT64:!0,NUMERIC:!0,STRING:!0,TIME:!0,TIMESTAMP:!0,ARRAY:!0,STRUCT:!0};function mo(r,t){return{type:"unary_expr",operator:r,expr:t}}function Ao(r,t,n){return{type:"binary_expr",operator:r,left:t,right:n}}function Eo(r){const t=BigInt(Number.MAX_SAFE_INTEGER);return!(BigInt(r)<t)}function wo(r,t){const n=[r];for(let r=0;r<t.length;r++)n.push(t[r][3]);return n}function Co(r,t){let n=r;for(let r=0;r<t.length;r++)n=Ao(t[r][1],n,t[r][3]);return n}function To(r){const t=Io[r];return t||(r||null)}function So(r){const t=[];for(let n of r.keys()){const r=n.split("::");if(!r){t.push(n);break}r&&r[1]&&(r[1]=To(r[1])),t.push(r.join("::"))}return t}const Lo=new Set,go=new Set,Io={};if((n=a())!==o&&sn===r.length)return n;throw n!==o&&sn<r.length&&dn({type:"end"}),mn(ln,fn<r.length?r.charAt(fn):null,fn<r.length?hn(fn,fn+1):hn(fn,fn))}}},function(r,t,n){r.exports=n(2)},function(r,t,n){"use strict";n.r(t),n.d(t,"Parser",(function(){return Hr})),n.d(t,"util",(function(){return e}));var e={};n.r(e),n.d(e,"arrayStructTypeToSQL",(function(){return q})),n.d(e,"autoIncreatementToSQL",(function(){return Z})),n.d(e,"columnOrderListToSQL",(function(){return z})),n.d(e,"commonKeywordArgsToSQL",(function(){return J})),n.d(e,"commonOptionConnector",(function(){return x})),n.d(e,"connector",(function(){return U})),n.d(e,"commonTypeValue",(function(){return G})),n.d(e,"commentToSQL",(function(){return X})),n.d(e,"createBinaryExpr",(function(){return M})),n.d(e,"createValueExpr",(function(){return k})),n.d(e,"DEFAULT_OPT",(function(){return j})),n.d(e,"escape",(function(){return D})),n.d(e,"literalToSQL",(function(){return H})),n.d(e,"identifierToSql",(function(){return W})),n.d(e,"onPartitionsToSQL",(function(){return V})),n.d(e,"replaceParams",(function(){return B})),n.d(e,"returningToSQL",(function(){return K})),n.d(e,"hasVal",(function(){return $})),n.d(e,"setParserOpt",(function(){return P})),n.d(e,"toUpper",(function(){return Y})),n.d(e,"topToSQL",(function(){return F})),n.d(e,"triggerEventToSQL",(function(){return Q}));var o=n(0);var u,a,i,s=(u={},a="bigquery",i=o.parse,a in u?Object.defineProperty(u,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):u[a]=i,u);function c(r){return function(r){if(Array.isArray(r))return f(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(!r)return;if("string"==typeof r)return f(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(r,t)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function l(r){if(!r)return[];var t=r.keyword,n=r.type;return[t.toUpperCase(),n.toUpperCase()]}function p(r){if(r){var t=r.type,n=r.expr,e=r.symbol,o=t.toUpperCase(),u=[];switch(u.push(o),o){case"KEY_BLOCK_SIZE":e&&u.push(e),u.push(H(n));break;case"BTREE":case"HASH":u.length=0,u.push.apply(u,c(l(r)));break;case"WITH PARSER":u.push(n);break;case"VISIBLE":case"INVISIBLE":break;case"COMMENT":u.shift(),u.push(X(r));break;case"DATA_COMPRESSION":u.push(e,Y(n.value),V(n.on));break;default:u.push(e,H(n))}return u.filter($).join(" ")}}function v(r){return r?r.map(p):[]}function b(r){var t=r.constraint_type,n=r.index_type,e=r.index_options,o=void 0===e?[]:e,u=r.definition,a=[];if(a.push.apply(a,c(l(n))),u&&u.length){var i="CHECK"===Y(t)?"(".concat(hr(u[0]),")"):"(".concat(u.map((function(r){return W(r)})).join(", "),")");a.push(i)}return a.push(v(o).join(" ")),a}function y(r){return function(r){if(Array.isArray(r))return h(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(!r)return;if("string"==typeof r)return h(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(r,t)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function d(r){if(r){var t=r.constraint,n=r.constraint_type,e=r.index,o=r.keyword,u=r.reference_definition,a=[];return a.push(Y(o)),a.push(W(t)),a.push(Y(n)),a.push(W(e)),a.push.apply(a,y(b(r))),a.push.apply(a,y(L(u))),a.filter($).join(" ")}}function m(r){var t=r.table,n=r.db,e=r.as,o=r.expr,u=W(n),a=t?W(t):hr(o),i=u?"".concat(u,".").concat(a):a;return e?"".concat(i," AS ").concat(W(e)):i}function A(r){if("UNNEST"===Y(r.type))return function(r){var t=r.type,n=r.as,e=r.expr,o=r.with_offset;return[Y(t),"(".concat(e&&hr(e)||" ",")"),x("AS",W,n),x(Y(o&&o.keyword),W,o&&o.as)].filter($).join(" ")}(r);var t=r[0],n=[];if("dual"===t.type)return"DUAL";n.push(m(t));for(var e=1;e<r.length;++e){var o=r[e],u=o.on,a=o.using,i=o.join,s=[];s.push(i?" ".concat(i):","),s.push(m(o)),s.push(x("ON",hr,u)),a&&s.push("USING (".concat(a.map(W).join(", "),")")),n.push(s.filter($).join(" "))}return n.filter($).join("")}function E(r){var t=r.keyword,n=r.symbol,e=r.value,o=[t.toUpperCase()];return n&&o.push(n),o.push(e),o.join(" ")}function w(r){return function(r){if(Array.isArray(r))return C(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(!r)return;if("string"==typeof r)return C(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(r,t)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function T(r){var t=r.arrow,n=r.as,e=r.collate,o=r.column,u=r.isDual,a=r.table,i=r.parentheses,s=r.property,c="*"===o?"*":W(o,u);a&&(c="".concat(W(a),".").concat(c));var f=[c,x("AS",hr,n),x(t,H,s)];e&&f.push(G(e).join(" "));var l=f.filter($).join(" ");return i?"(".concat(l,")"):l}function S(r){var t=r||{},n=t.dataType,e=t.length,o=t.suffix,u=t.scale,a=n;return e&&(a+="(".concat([e,u].filter($).join(", "),")")),o&&o.length&&(a+=" ".concat(o.join(" "))),a}function L(r){var t=[];if(!r)return t;var n=r.definition,e=r.keyword,o=r.match,u=r.table,a=r.on_delete,i=r.on_update;return t.push(e.toUpperCase()),t.push(A(u)),t.push("(".concat(n.map(W).join(", "),")")),t.push(Y(o)),t.push.apply(t,w(G(a))),t.push.apply(t,w(G(i))),t.filter($)}function g(r){var t=r.column,n=r.collate,e=r.nulls,o=r.opclass,u=r.order;return[hr(t),x(n&&n.type,W,n&&n.value),o,Y(u),Y(e)].filter($).join(" ")}function I(r){var t=[],n=T(r.column),e=S(r.definition);t.push(n),t.push(e);var o=function(r){var t=[],n=r.nullable,e=r.check,o=r.comment,u=r.collate,a=r.storage,i=r.default_val,s=r.auto_increment,c=r.unique_or_primary,f=r.column_format,l=r.reference_definition;if(t.push(Y(n&&n.value)),i){var p=i.type,v=i.value;t.push(p.toUpperCase(),hr(v))}return t.push(d(e)),t.push(Z(s),Y(c),X(o)),t.push.apply(t,w(G(u))),t.push.apply(t,w(G(f))),t.push.apply(t,w(G(a))),t.push.apply(t,w(L(l))),t.filter($).join(" ")}(r);return t.push(o),t.filter($).join(" ")}function N(r,t){if(!r||"*"===r)return r;var n=function(r){var t=Array.isArray(r)&&r[0];return!(!t||"dual"!==t.type)}(t),e=[],o=r.expr_list,u=r.star,a=r.type;e.push(u,Y(a));var i=(o||r).map((function(r){return function(r,t){var n=r.expr;t&&(n.isDual=t);var e=hr(n);return null!==r.as&&(e="".concat(e," AS "),e=r.as.match(/^[a-z_][0-9a-z_]*$/i)?"".concat(e).concat(W(r.as)):"".concat(e,"`").concat(r.as,"`")),e}(r,n)})).join(", ");return e.push([a&&"(",i,a&&")"].filter($).join("")),e.filter($).join(" ")}function O(r){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var R={"\0":"\\0","'":"\\'",'"':'\\"',"\b":"\\b","\n":"\\n","\r":"\\r","\t":"\\t","":"\\Z"},j={database:"bigquery",type:"table"},_=j;function x(r,t,n){if(n)return r?"".concat(r.toUpperCase()," ").concat(t(n)):t(n)}function U(r,t){if(t)return"".concat(r.toUpperCase()," ").concat(t)}function k(r){var t=O(r);if(Array.isArray(r))return{type:"expr_list",value:r.map(k)};if(null===r)return{type:"null",value:null};switch(t){case"boolean":return{type:"bool",value:r};case"string":return{type:"string",value:r};case"number":return{type:"number",value:r};default:throw new Error('Cannot convert value "'.concat(t,'" to SQL'))}}function M(r,t,n){var e={operator:r,type:"binary_expr"};return e.left=t.type?t:k(t),"BETWEEN"===r||"NOT BETWEEN"===r?(e.right={type:"expr_list",value:[k(n[0]),k(n[1])]},e):(e.right=n.type?n:k(n),e)}function D(r){for(var t=[],n=0,e=r.length;n<e;++n){var o=r[n],u=R[o];u&&(o=u),t.push(o)}return t.join("")}function P(r){_=r}function F(r){if(r){var t=r.value,n=r.percent,e="TOP ".concat(t);return n?"".concat(e," ").concat(n.toUpperCase()):e}}function W(r,t){var n=_.database;if(!0===t)return"'".concat(r,"'");if(r)switch(n&&n.toLowerCase()){case"mysql":case"mariadb":return"`".concat(r,"`");case"postgresql":return'"'.concat(r,'"');case"transactsql":return"[".concat(r,"]");case"bigquery":case"db2":return r;default:return"`".concat(r,"`")}}function H(r){if(r){var t=r.type,n=r.parentheses,e=r.value,o=e;switch(t){case"string":o="'".concat(D(e),"'");break;case"single_quote_string":o="'".concat(e,"'");break;case"boolean":case"bool":o=e?"TRUE":"FALSE";break;case"null":o="NULL";break;case"star":o="*";break;case"param":o=":".concat(e);break;case"origin":o=e.toUpperCase();break;case"time":case"date":case"timestamp":o="".concat(t.toUpperCase()," '").concat(e,"'")}return n?"(".concat(o,")"):o}}function B(r,t){return function r(t,n){return Object.keys(t).filter((function(r){var n=t[r];return Array.isArray(n)||"object"===O(n)&&null!==n})).forEach((function(e){var o=t[e];if("object"!==O(o)||"param"!==o.type)return r(o,n);if(void 0===n[o.value])throw new Error("no value for parameter :".concat(o.value," found"));return t[e]=k(n[o.value]),null})),t}(JSON.parse(JSON.stringify(r)),t)}function G(r){var t=[];if(!r)return t;var n=r.type,e=r.value;return t.push(n.toUpperCase()),t.push(e.toUpperCase()),t}function Y(r){if(r)return r.toUpperCase()}function $(r){return r}function V(r){var t=r.type,n=r.partitions;return[Y(t),"(".concat(n.map((function(r){if("range"!==r.type)return H(r);var t=r.start,n=r.end,e=r.symbol;return"".concat(H(t)," ").concat(Y(e)," ").concat(H(n))})).join(", "),")")].join(" ")}function q(r){if(r){var t=r.dataType,n=r.definition,e=r.anglebracket,o=Y(t);if("ARRAY"!==o&&"STRUCT"!==o)return o;var u=n&&n.map((function(r){return[r.field_name,q(r.field_type)].filter($).join(" ")})).join(", ");return e?"".concat(o,"<").concat(u,">"):"".concat(o," ").concat(u)}}function X(r){if(r){var t=[],n=r.keyword,e=r.symbol,o=r.value;return t.push(n.toUpperCase()),e&&t.push(e),t.push(H(o)),t.join(" ")}}function Q(r){return r.map((function(r){var t=r.keyword,n=r.args,e=[Y(t)];if(n){var o=n.keyword,u=n.columns;e.push(Y(o),u.map(T).join(", "))}return e.join(" ")})).join(" OR ")}function K(r){return r?["RETURNING",r.columns.map(T).filter($).join(", ")].join(" "):""}function J(r){return r?[Y(r.keyword),Y(r.args)]:[]}function Z(r){if(!r||"string"==typeof r)return Y(r);var t=r.keyword,n=r.seed,e=r.increment,o=r.parentheses,u=Y(t);return o&&(u+="(".concat(H(n),", ").concat(H(e),")")),u}function z(r){if(r)return r.map(g).filter($).join(", ")}function rr(r){return function(r){if(Array.isArray(r))return tr(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(!r)return;if("string"==typeof r)return tr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(r,t)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function nr(r){if("string"==typeof r)return r;var t=r.window_specification;return"(".concat(function(r){var t=r.name,n=r.partitionby,e=r.orderby,o=r.window_frame_clause;return[t,mr(n,"partition by"),mr(e,"order by"),Y(o)].filter($).join(" ")}(t),")")}function er(r){var t=r.name,n=r.as_window_specification;return"".concat(t," AS ").concat(nr(n))}function or(r){if(r){var t=r.as_window_specification,n=r.orderby,e=r.partitionby;if("WINDOW"===Y(r.type)){var o=nr(t);return"OVER ".concat(o)}var u=mr(e,"partition by"),a=mr(n,"order by");return"OVER (".concat([u,a].filter($).join(" "),")")}}function ur(r){var t=r.args,n=r.name;if(!t)return n;var e=r.parentheses,o=r.over,u="".concat(n,"(").concat(hr(t).join(", "),")"),a=or(o);return[e?"(".concat(u,")"):u,a].filter($).join(" ")}function ar(r){return function(r){if(Array.isArray(r))return ir(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(!r)return;if("string"==typeof r)return ir(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(r,t)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function sr(r){return r?[Y(r.prefix),hr(r.value),Y(r.suffix)]:[]}function cr(r){return r?r.fetch?(n=(t=r).fetch,e=t.offset,[].concat(ar(sr(e)),ar(sr(n))).filter($).join(" ")):function(r){var t=r.seperator;return U("LIMIT",r.value.map(hr).join("".concat("offset"===t?" ":"").concat(Y(t)," ")))}(r):"";var t,n,e}function fr(r){if(r&&0!==r.length){var t=r[0].recursive?"RECURSIVE ":"",n=r.map((function(r){var t=r.name,n=r.stmt,e=r.columns,o=Array.isArray(e)?"(".concat(e.join(", "),")"):"";return"".concat(t).concat(o," AS (").concat(hr(n),")")})).join(", ");return"WITH ".concat(t).concat(n)}}function lr(r){var t=r.as_struct_val,n=r.columns,e=r.distinct,o=r.from,u=r.for_sys_time_as_of,a=void 0===u?{}:u,i=r.for_update,s=r.groupby,c=r.having,f=r.limit,l=r.options,p=r.orderby,v=r.parentheses_symbol,b=r.top,y=r.window,h=r.with,d=r.where,m=[fr(h),"SELECT",Y(t)];m.push(F(b)),Array.isArray(l)&&m.push(l.join(" ")),m.push(e,N(n,o)),m.push(x("FROM",A,o));var E=a||{},w=E.keyword,C=E.expr;m.push(x(w,hr,C)),m.push(x("WHERE",hr,d)),m.push(U("GROUP BY",dr(s).join(", "))),m.push(x("HAVING",hr,c)),m.push(x("WINDOW",hr,y)),m.push(mr(p,"order by")),m.push(cr(f)),m.push(Y(i));var T=m.filter($).join(" ");return v?"(".concat(T,")"):T}function pr(r){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function vr(r){var t=r.definition,n=[Y(r.keyword)];return t&&"object"===pr(t)&&(n.length=0,n.push(q(t))),n.push(function(r){var t=r.array_path,n=r.expr_list;switch(Y(r.type)){case"STRUCT":return"(".concat(N(n),")");case"ARRAY":return"[".concat(n?n.map((function(r){return"(".concat(N(r),")")})).filter($).join(", "):N(t),"]");default:return""}}(r)),n.filter($).join("")}function br(r){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var yr={alter:function(r){var t=r.action,n=r.constraint_type,e=r.if_not_exists,o=r.keyword,u=r.resource,a="",i=[];switch(u){case"column":i=[I(r)];break;case"index":i=b(r),a=r[u];break;case"table":a=W(r[u]);break;case"algorithm":case"lock":a="= ".concat(r[u]);break;case"constraint":a=W(r[u]),i=[Y(n)].concat(rr(b(r)))}return[Y(t),Y(o),Y(e),a,i.filter($).join(" ")].filter($).join(" ")},aggr_func:function(r){var t=r.args,n=r.over,e=hr(t.expr),o=r.name,u=or(n);return"COUNT"===o&&t.distinct&&(e="DISTINCT ".concat(e)),["".concat(o,"(").concat(e,")"),u].filter($).join(" ")},array:vr,assign:function(r){var t=r.left,n=r.right,e=r.symbol,o=r.keyword;t.keyword=o;var u=hr(t),a=hr(n);return"".concat(u," ").concat(e," ").concat(a)},extract:function(r){var t=r.args,n=r.type,e=t.field,o=t.cast_type,u=t.source,a=["".concat(Y(n),"(").concat(Y(e)),"FROM",Y(o),hr(u)];return"".concat(a.filter($).join(" "),")")},binary_expr:function(r){var t=r.operator,n=hr(r.right),e=!1;if(Array.isArray(n)){switch(t){case"=":t="IN";break;case"!=":t="NOT IN";break;case"BETWEEN":case"NOT BETWEEN":e=!0,n="".concat(n[0]," AND ").concat(n[1])}e||(n="(".concat(n.join(", "),")"))}var o="".concat(hr(r.left)," ").concat(t," ").concat(n);return r.parentheses?"(".concat(o,")"):o},case:function(r){var t=["CASE"],n=r.args;r.expr&&t.push(hr(r.expr));for(var e=0,o=n.length;e<o;++e)t.push(n[e].type.toUpperCase()),n[e].cond&&(t.push(hr(n[e].cond)),t.push("THEN")),t.push(hr(n[e].result));return t.push("END"),t.join(" ")},cast:function(r){var t=r.target,n=r.expr,e=r.symbol,o=t.length,u=t.dataType,a=t.parentheses,i=t.scale,s="";o&&(s=i?"".concat(o,", ").concat(i):o),a&&(s="(".concat(s,")"));var c=hr(n),f="::",l="";return"as"===e&&(c="CAST(".concat(c),l=")",f=" ".concat(e.toUpperCase()," ")),"".concat(c).concat(f).concat(u).concat(s).concat(l)},column_ref:T,function:ur,interval:function(r){var t=r.expr,n=r.unit;return["INTERVAL",hr(t),Y(n)].filter($).join(" ")},struct:vr,window:function(r){return r.expr.map(er).join(", ")}};function hr(r){var t=r;if(r.ast){var n=t.ast;Reflect.deleteProperty(t,n);for(var e=0,o=Object.keys(n);e<o.length;e++){var u=o[e];t[u]=n[u]}}return yr[t.type]?yr[t.type](t):H(t)}function dr(r){return r?r.map(hr):[]}function mr(r,t){if(!Array.isArray(r))return"";var n=[],e=Y(t);switch(e){case"ORDER BY":n=r.map((function(r){return"".concat(hr(r.expr)," ").concat(r.type)}));break;case"PARTITION BY":default:n=r.map((function(r){return"".concat(T(r.expr))}))}return U(e,n.join(", "))}function Ar(r){return function(r){if(Array.isArray(r))return Er(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(!r)return;if("string"==typeof r)return Er(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Er(r,t)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Er(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function wr(r){if(!r)return[];var t,n,e,o,u=r.resource;switch(u){case"column":return I(r);case"index":return n=[],e=(t=r).keyword,o=t.index,n.push(Y(e)),n.push(o),n.push.apply(n,c(b(t))),n.filter($).join(" ");case"constraint":return d(r);default:throw new Error("unknow resource = ".concat(u," type"))}}function Cr(r,t){var n;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=function(r,t){if(!r)return;if("string"==typeof r)return Tr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tr(r,t)}(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var e=0,o=function(){};return{s:o,n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,i=!1;return{s:function(){n=r[Symbol.iterator]()},n:function(){var r=n.next();return a=r.done,r},e:function(r){i=!0,u=r},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw u}}}}function Tr(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function Sr(r){if(!r||0===r.length)return"";var t,n=[],e=Cr(r);try{for(e.s();!(t=e.n()).done;){var o=t.value,u="",a=o.table,i=o.column,s=o.value;u=[a,i].filter($).map((function(r){return W(r)})).join("."),s&&(u="".concat(u," = ").concat(hr(s))),n.push(u)}}catch(r){e.e(r)}finally{e.f()}return n.join(", ")}function Lr(r){if("select"===r.type)return lr(r);var t=r.map(hr);return"(".concat(t.join("),("),")")}function gr(r){if(!r)return"";var t=["PARTITION","("];if(Array.isArray(r))t.push(r.map(W).join(", "));else{var n=r.value;t.push(n.map(hr).join(", "))}return t.push(")"),t.filter($).join("")}function Ir(r){return function(r){if(Array.isArray(r))return Rr(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||Or(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(r,t){var n;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=Or(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var e=0,o=function(){};return{s:o,n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,i=!1;return{s:function(){n=r[Symbol.iterator]()},n:function(){var r=n.next();return a=r.done,r},e:function(r){i=!0,u=r},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw u}}}}function Or(r,t){if(r){if("string"==typeof r)return Rr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rr(r,t):void 0}}function Rr(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function jr(r){var t=r.type,n=r.keyword,e=r.name,o=[Y(t),Y(n)];switch(n){case"table":o.push(A(e));break;case"procedure":o.push(W(e))}return o.filter($).join(" ")}function _r(r){var t=r.type,n=r.keyword,e=r.tables,o=[t.toUpperCase(),Y(n)];if("UNLOCK"===t.toUpperCase())return o.join(" ");var u,a=[],i=Nr(e);try{var s=function(){var r=u.value,t=r.table,n=r.lock_type,e=[m(t)];if(n){e.push(["prefix","type","suffix"].map((function(r){return Y(n[r])})).filter($).join(" "))}a.push(e.join(" "))};for(i.s();!(u=i.n()).done;)s()}catch(r){i.e(r)}finally{i.f()}return o.push.apply(o,[a.join(", ")].concat(Ir(function(r){var t=r.lock_mode,n=r.nowait,e=[];if(t){var o=t.mode;e.push(o.toUpperCase())}return n&&e.push(n.toUpperCase()),e}(r)))),o.filter($).join(" ")}yr.var=function(r){var t=r.prefix,n=void 0===t?"@":t,e=r.name,o=r.members,u=r.keyword,a=[];u&&a.push(u);var i=o&&o.length>0?"".concat(e,".").concat(o.join(".")):e;return a.push("".concat(n||"").concat(i)),a.join(" ")},yr.expr_list=function(r){var t=dr(r.value);return r.parentheses?"(".concat(t,")"):t},yr.select=function(r){var t="object"===br(r._next)?Ur(r):lr(r);return r.parentheses?"(".concat(t,")"):t},yr.unary_expr=function(r){var t="".concat(r.operator," ").concat(hr(r.expr));return r.parentheses?"(".concat(t,")"):t};var xr={alter:function(r){var t=r.type,n=r.table,e=r.expr,o=void 0===e?[]:e;return[Y(t),"TABLE",A(n),o.map(hr).join(", ")].filter($).join(" ")},create:function(r){var t=r.keyword,n="";switch(t.toLowerCase()){case"table":n=function(r){var t=r.type,n=r.keyword,e=r.table,o=r.like,u=r.as,a=r.temporary,i=r.if_not_exists,s=r.create_definitions,c=r.table_options,f=r.ignore_replace,l=r.query_expr,p=[Y(t),Y(a),Y(n),Y(i),A(e)];if(o){var v=o.type,b=A(o.table);return p.push(Y(v),b),p.filter($).join(" ")}return s&&p.push("(".concat(s.map(wr).join(", "),")")),c&&p.push(c.map(E).join(" ")),p.push(Y(f),Y(u)),l&&p.push(Ur(l)),p.filter($).join(" ")}(r);break;case"trigger":n=function(r){var t=r.constraint,n=r.constraint_kw,e=r.deferrable,o=r.events,u=r.execute,a=r.for_each,i=r.from,s=r.location,c=r.keyword,f=r.type,l=r.table,p=r.when,v=[Y(f),Y(n),Y(c),W(t),Y(s)],b=Q(o);return v.push(b,"ON",m(l)),i&&v.push("FROM",m(i)),v.push.apply(v,Ar(J(e)).concat(Ar(J(a)))),p&&v.push(Y(p.type),hr(p.cond)),v.push(Y(u.keyword),ur(u.expr)),v.filter($).join(" ")}(r);break;case"extension":n=function(r){var t=r.extension,n=r.from,e=r.if_not_exists,o=r.keyword,u=r.schema,a=r.type,i=r.with,s=r.version;return[Y(a),Y(o),Y(e),H(t),Y(i),x("SCHEMA",H,u),x("VERSION",H,s),x("FROM",H,n)].filter($).join(" ")}(r);break;case"index":n=function(r){var t=r.concurrently,n=r.filestream_on,e=r.keyword,o=r.include,u=r.index_columns,a=r.index_type,i=r.index_using,s=r.index,c=r.on,f=r.on_kw,p=r.table,b=r.tablespace,y=r.type,h=r.where,d=r.with,A=r.with_before_where,E=d&&"WITH (".concat(v(d).join(", "),")"),w=o&&"".concat(Y(o.keyword)," (").concat(o.columns.map((function(r){return W(r)})).join(", "),")"),C=[Y(y),Y(a),Y(e),Y(t),W(s),Y(f),m(p)].concat(Ar(l(i)),["(".concat(z(u),")"),w,x("TABLESPACE",H,b)]);return A?C.push(E,x("WHERE",hr,h)):C.push(x("WHERE",hr,h),E),C.push(x("ON",hr,c),x("FILESTREAM_ON",H,n)),C.filter($).join(" ")}(r);break;default:throw new Error("unknow create resource ".concat(t))}return n},select:lr,delete:function(r){var t=["DELETE"],n=r.columns,e=r.from,o=r.table,u=r.where,a=r.orderby,i=r.limit,s=N(n,e);return t.push(s),Array.isArray(o)&&(1===o.length&&!0===o[0].addition||t.push(A(o))),t.push(x("FROM",A,e)),t.push(x("WHERE",hr,u)),t.push(mr(a,"order by")),t.push(cr(i)),t.filter($).join(" ")},update:function(r){var t=r.table,n=r.set,e=r.where,o=r.orderby,u=r.limit,a=r.returning;return["UPDATE",A(t),x("SET",Sr,n),x("WHERE",hr,e),mr(o,"order by"),cr(u),K(a)].filter($).join(" ")},insert:function(r){var t=r.table,n=r.prefix,e=void 0===n?"into":n,o=r.columns,u=r.values,a=r.where,i=r.on_duplicate_update,s=r.partition,c=r.returning,f=r.set,l=["INSERT",Y(e),A(t),gr(s)];return Array.isArray(o)&&l.push("(".concat(o.map(W).join(", "),")")),l.push(x(Array.isArray(u)?"VALUES":"",Lr,u)),l.push(x("SET",Sr,f)),l.push(x("WHERE",hr,a)),l.push(K(c)),l.push(x(i&&i.keyword,Sr,i&&i.set)),l.filter($).join(" ")},drop:jr,truncate:jr,declare:function(r){var t=r.type,n=r.declare,e=[Y(t)],o=n.map((function(r){var t=r.at,n=r.name,e=r.as,o=r.prefix,u=r.definition,a=r.keyword,i=["".concat(t).concat(n),Y(e)];switch(a){case"variable":i.push(S(o)),u&&i.push("=",hr(u));break;case"cursor":i.push(Y(o));break;case"table":i.push(Y(o),"(".concat(u.map(wr).join(", "),")"))}return i.filter($).join(" ")})).join(", ");return e.push(o),e.join(" ")},use:function(r){var t=r.type,n=r.db,e=Y(t),o=W(n);return"".concat(e," ").concat(o)},rename:function(r){var t=r.type,n=r.table,e=[],o="".concat(t&&t.toUpperCase()," TABLE");if(n){var u,a=Nr(n);try{for(a.s();!(u=a.n()).done;){var i=u.value.map(m);e.push(i.join(" TO "))}}catch(r){a.e(r)}finally{a.f()}}return"".concat(o," ").concat(e.join(", "))},call:function(r){var t=hr(r.expr);return"".concat("CALL"," ").concat(t)},set:function(r){var t=hr(r.expr);return"".concat("SET"," ").concat(t)},lock:_r,unlock:_r};function Ur(r){for(var t=xr[r.type],n=[t(r)],e=r,o=e._orderby,u=e._limit;r._next;){var a=(r.union||"union").toUpperCase();n.push(a,t(r._next)),r=r._next}return n.push(mr(o,"order by"),cr(u)),n.filter($).join(" ")}var kr=["select","delete","update","insert","drop","rename","truncate","call","use","alter","set","create","lock","unlock","bigquery","declare"];function Mr(r){var t=r&&r.ast?r.ast:r;if(!kr.includes(t.type))throw new Error("".concat(t.type," statements not supported at the moment"))}function Dr(r){return Array.isArray(r)?(r.forEach(Mr),function(r){for(var t=[],n=0,e=r.length;n<e;++n){var o=r[n]&&r[n].ast;o||(o=r[n]),t.push(Ur(o))}return t.join(" ; ")}(r)):(Mr(r),"bigquery"===r.type?(n=(t=r).with,e=t.parentheses,o=t.select,u=t.orderby,a=t.limit,(i=[fr(n),e&&"(",Ur(o),e&&")"]).push(mr(u,"order by"),cr(a)),i.filter((function(r){return r})).join(" ")):Ur(r));var t,n,e,o,u,a,i}function Pr(r,t){var n;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=function(r,t){if(!r)return;if("string"==typeof r)return Fr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fr(r,t)}(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var e=0,o=function(){};return{s:o,n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,i=!1;return{s:function(){n=r[Symbol.iterator]()},n:function(){var r=n.next();return a=r.done,r},e:function(r){i=!0,u=r},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw u}}}}function Fr(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function Wr(r,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}var Hr=function(){function r(){!function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}var t,n,e;return t=r,(n=[{key:"astify",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,n=this.parse(r,t);return n&&n.ast}},{key:"sqlify",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;return P(t),Dr(r)}},{key:"parse",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,n=t.database,e=void 0===n?"bigquery":n;P(t);var o=e.toLowerCase();if(s[o])return s[o](r.trim());throw new Error("".concat(e," is not supported currently"))}},{key:"whiteListCheck",value:function(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j;if(t&&0!==t.length){var e=n.type,o=void 0===e?"table":e;if(!this["".concat(o,"List")]||"function"!=typeof this["".concat(o,"List")])throw new Error("".concat(o," is not valid check mode"));var u,a=this["".concat(o,"List")].bind(this),i=a(r,n),s=!0,c="",f=Pr(i);try{for(f.s();!(u=f.n()).done;){var l,p=u.value,v=!1,b=Pr(t);try{for(b.s();!(l=b.n()).done;){var y=l.value,h=new RegExp(y,"i");if(h.test(p)){v=!0;break}}}catch(r){b.e(r)}finally{b.f()}if(!v){c=p,s=!1;break}}}catch(r){f.e(r)}finally{f.f()}if(!s)throw new Error("authority = '".concat(c,"' is required in ").concat(o," whiteList to execute SQL = '").concat(r,"'"))}}},{key:"tableList",value:function(r,t){var n=this.parse(r,t);return n&&n.tableList}},{key:"columnList",value:function(r,t){var n=this.parse(r,t);return n&&n.columnList}}])&&Wr(t.prototype,n),e&&Wr(t,e),r}();global&&global.window&&(global.window.NodeSQLParser={Parser:Hr,util:e})}]));
//# sourceMappingURL=bigquery.js.map